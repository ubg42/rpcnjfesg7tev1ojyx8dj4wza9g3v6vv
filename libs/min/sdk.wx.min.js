window.adm = function(e) {
    "use strict";
    e.SDKEntity = void 0, function(e) {
        let t, s, n, i, r;
        !function(e) {
            e.PC = "pc", e.WEB = "web", e.WEIXIN = "wx", e.BAIDU = "swan", e.VIVO = "vivo", 
            e.TT = "toutiao", e.MEIZU = "meizu", e.OPPO = "oppo", e.NATIVE_XIAOMI = "native_xiaomi", 
            e.NATIVE_TAPTAP = "native_taptap", e.QQ = "qq", e.QTT = "qtt", e.FTNN = "4399", 
            e.FTNNBOX = "4399box", e.NATIVE_ANDROID = "native_android", e.NATIVE_IOS = "native_ios", 
            e.KUAISHOU = "kuaishou", e.HUAWEI = "huawei", e.UC = "uc", e.NATIVE_233 = "native_233", 
            e.TTFF = "2345", e.CHUANYIN = "chuanyin", e.NATIVE_KXHZ = "native_kxhz", e.NATIVE_MMY = "native_mmy", 
            e.NATIVE_VIVO = "native_vivo", e.NATIVE_OPPO = "native_oppo", e.NATIVE_XINGTU = "native_xingtu", 
            e.NATIVE_MEIZU = "native_meizu", e.NATIVE_TOPON = "native_topon", e.NATIVE_HUAWEI = "native_huawei", 
            e.NATIVE_4399 = "native_4399", e.NATIVE_GP = "native_googleplay", e.NATIVE_SHANWAN = "native_shanwan", 
            e.XIAOMI = "xiaomi";
        }(t = e.PlatformType || (e.PlatformType = {})), function(e) {
            e.BI = "BIStat", e.QQ = "QQStat", e.TAPTAP = "TapTapStat", e.WEIXIN = "WXStat", 
            e.NATIVE_ANDROID = "nativeAndroidStat", e.NATIVE_IOS = "nativeIosStat", e.TT = "toutiaoStat", 
            e.TTFF = "2345Stat", e.CHUANYIN = "chuanyinStat";
        }(s = e.StatisticsType || (e.StatisticsType = {}));
        e.ShareInfoCfgEntity = class {
            constructor() {
                this.image = void 0, this.title = void 0;
            }
        };
        e.ServerJsonCfg = class {}, function(e) {
            e[e.SHARE_SUCCESS = 0] = "SHARE_SUCCESS";
        }(n = e.DataStubType || (e.DataStubType = {})), function(e) {
            e[e.UNACTIVATE = 0] = "UNACTIVATE", e[e.ACTIVATE = 1] = "ACTIVATE", e[e.GET = 2] = "GET";
        }(i = e.GET_STATE || (e.GET_STATE = {})), function(e) {
            e[e.Male = 0] = "Male", e[e.Female = 1] = "Female";
        }(r = e.Gender || (e.Gender = {}));
        e.UserInfoEntity = class {
            constructor() {
                this.userId = void 0, this.name = void 0, this.headUrl = void 0, this.sex = void 0, 
                this.city = void 0, this.province = void 0, this.country = void 0, this.language = void 0;
            }
        };
        e.UserConfigEntity = class {};
        e.ShareQueryParam = class {
            constructor() {
                this.shareUserId = void 0, this.shareType = void 0;
            }
        };
        e.ShareInfoEntity = class {
            constructor() {
                this.name = void 0, this.headUrl = void 0, this.userId = void 0, this.state = void 0;
            }
        };
        e.ShareStatisticEntity = class {
            constructor() {
                this.count = void 0, this.helpOtherCnt = void 0;
            }
        };
        e.MailEntity = class {
            constructor() {
                this.id = void 0, this.content = void 0, this.rewards = void 0, this.createdAt = void 0;
            }
        };
        e.CommonRst = class {
            constructor() {
                this.msg = "";
            }
        };
        e.CommonRsp = class {
            constructor() {
                this.result = !0;
            }
        };
        e.DataStubRst = class {};
        e.LoginEntityRst = class {};
        e.LoginEntityRsp = class {};
        e.ShareInfoRst = class {};
        e.ShareInfoRsp = class {};
        e.ShareClearRst = class {};
        e.ShareQueryRst = class {};
        e.ShareQueryRsp = class {};
        e.GiftStateUpdateRst = class {};
        e.MailSendRst = class {};
        e.MailInfoRsp = class {};
        e.MailOpenRst = class {};
        e.MailOpenRsp = class {};
        e.CustomServiceCheckRst = class {};
        e.CustomServiceRecvMsgRst = class {};
        e.CustomServiceSendMsgRst = class {};
        e.SubscribeMsgRst = class {};
        e.CustomServiceQueryRst = class {};
        e.CustomServiceQueryRsp = class {};
        e.RankScoreRst = class {};
        e.RankInfoRst = class {};
        e.RankInfoRsp = class {};
        e.IpQueryRst = class {};
        e.IpQueryRsp = class {};
        e.StatStageRst = class {};
        e.StatEventRst = class {};
        e.SaveDataRst = class {};
        e.VoteRst = class {};
        e.VoteRankRst = class {};
        e.VoteItem = class {};
        e.VoteRankRsp = class {};
        e.AccessTokenRst = class {};
        e.AccessTokenRsp = class {};
        e.IdInfoPkg = class {};
        e.IdentityRst = class {};
        e.WhiteQueryRst = class {};
        e.WhiteQueryRsp = class {};
        e.OpenIdRst = class {};
        e.OpenIdRsp = class {};
    }(e.SDKEntity || (e.SDKEntity = {}));
    var t = e.SDKEntity.PlatformType;
    const s = "2.0.076";
    class n {}
    var i, r, a, o, d, l, h, c, g, u, _, S;
    n.E_SDK_LOGIN = "$SDK_LOGIN", n.E_SDK_LOGOUT = "$SDK_LOGOUT", n.E_SDK_INIT_OK = "$SDK_INIT_OK", 
    n.E_SERVER_CFG_UPDATE = "$SERVER_CFG_UPDATE", n.E_GET_SHARE_INFO = "$GET_SHARE_INFO", 
    n.E_GET_SHARE_CONFIG = "$GET_SHARE_CONFIG", n.E_SHARE_RESULT = "$SHARE_RESULT", 
    n.E_SHARE_QUERY_INFO = "$SHARE_QUERY_INFO", n.E_USER_INFO = "$USER_INFO", n.E_FEEDBACK_CLICK = "$FEEDBACK_CLICK", 
    n.E_AD_VIDEO = "$AD_VIDEO", n.E_AD_BANNER = "$AD_BANNER", n.E_AD_INTERSTITIAL = "$AD_INTERSTITIAL", 
    n.E_AD_NATIVE = "$AD_NATIVE", n.E_AD_NATIVE_CUSTOM = "$D_NATIVE_CUSTOM", n.E_AD_APPBOX = "$AD_APPBOX", 
    n.E_AD_BLOCK = "$AD_BLOCK", n.E_FAVORITE_REWARD = "$FAVORITE_REWARD", n.E_ADD_DESKTOP = "$ADD_DESKTOP", 
    n.E_RECORD_VIDEO_START = "$RECORD_VIDEO_START", n.E_RECORD_VIDEO_END = "$RECORD_VIDEO_END", 
    n.E_RECORD_VIDEO_PAUSE = "$RECORD_VIDEO_PAUSE", n.E_RECORD_VIDEO_RESUME = "$RECORD_VIDEO_RESUME", 
    n.E_SERVER_JSON_CONFIG = "$SERVER_JSON_CFG", n.E_REWARD_GAIN = "$REWARD_GAIN", e.SdkCode = void 0, 
    (i = e.SdkCode || (e.SdkCode = {}))[i.WX_LOGIN_SUCCESS = 0] = "WX_LOGIN_SUCCESS", 
    i[i.WX_LOGIN_FAILED = 1] = "WX_LOGIN_FAILED", i[i.WX_AUTH_SUCCESS = 2] = "WX_AUTH_SUCCESS", 
    i[i.WX_AUTH_FAILED = 3] = "WX_AUTH_FAILED", i[i.SERVER_LOGIN_SUCCESS = 4] = "SERVER_LOGIN_SUCCESS", 
    i[i.SERVER_LOGIN_FAILED = 5] = "SERVER_LOGIN_FAILED", i[i.SERVER_LOGIN_ERROR = 6] = "SERVER_LOGIN_ERROR", 
    i[i.SHARE_SUCCESS = 7] = "SHARE_SUCCESS", i[i.SHARE_FAILED = 8] = "SHARE_FAILED", 
    i[i.SHARE_INFO_SUCCESS = 9] = "SHARE_INFO_SUCCESS", i[i.AD_VIDEO_SUCCESS = 10] = "AD_VIDEO_SUCCESS", 
    i[i.AD_VIDEO_UNCOMPLETE = 11] = "AD_VIDEO_UNCOMPLETE", i[i.AD_VIDEO_LOAD_FAIL = 12] = "AD_VIDEO_LOAD_FAIL", 
    i[i.AD_VIDEO_LOAD_SUCCESS = 13] = "AD_VIDEO_LOAD_SUCCESS", i[i.AD_INTERSTITIAL_SUCCESS = 14] = "AD_INTERSTITIAL_SUCCESS", 
    i[i.AD_INTERSTITIAL_FAIL = 15] = "AD_INTERSTITIAL_FAIL", i[i.AD_INTERSTITIAL_CLOSE = 16] = "AD_INTERSTITIAL_CLOSE", 
    i[i.AD_NATIVE_SUCCESS = 17] = "AD_NATIVE_SUCCESS", i[i.AD_NATIVE_FAIL = 18] = "AD_NATIVE_FAIL", 
    i[i.AD_NATIVE_DATA = 19] = "AD_NATIVE_DATA", i[i.AD_NATIVE_CUSTOM_SUCCESS = 20] = "AD_NATIVE_CUSTOM_SUCCESS", 
    i[i.AD_NATIVE_CUSTOM_FAIL = 21] = "AD_NATIVE_CUSTOM_FAIL", i[i.AD_NATIVE_CUSTOM_HIDE = 22] = "AD_NATIVE_CUSTOM_HIDE", 
    i[i.AD_NATIVE_CUSTOM_CLOSE = 23] = "AD_NATIVE_CUSTOM_CLOSE", i[i.AD_NATIVE_CUSTOM_LOAD_SUCCESS = 24] = "AD_NATIVE_CUSTOM_LOAD_SUCCESS", 
    i[i.AD_NATIVE_CUSTOM_LOAD_FAIL = 25] = "AD_NATIVE_CUSTOM_LOAD_FAIL", i[i.AD_APPBOX_SUCCESS = 26] = "AD_APPBOX_SUCCESS", 
    i[i.AD_APPBOX_FAIL = 27] = "AD_APPBOX_FAIL", i[i.AD_APPBOX_CLOSE = 28] = "AD_APPBOX_CLOSE", 
    i[i.AD_BLOCK_SUCCESS = 29] = "AD_BLOCK_SUCCESS", i[i.AD_BLOCK_FAIL = 30] = "AD_BLOCK_FAIL", 
    i[i.AD_BANNER_SUCCESS = 31] = "AD_BANNER_SUCCESS", i[i.AD_BANNER_FAIL = 32] = "AD_BANNER_FAIL", 
    i[i.AD_BANNER_LOAD_SUCCESS = 33] = "AD_BANNER_LOAD_SUCCESS", i[i.AD_BANNER_LOAD_FAIL = 34] = "AD_BANNER_LOAD_FAIL", 
    i[i.REWARD_GAIN_SUCCESS = 35] = "REWARD_GAIN_SUCCESS", i[i.REWARD_GAIN_FAIL = 36] = "REWARD_GAIN_FAIL", 
    i[i.AD_BANNER_RESIZE = 37] = "AD_BANNER_RESIZE", i[i.AD_ADDDESKTOP_SUCCESS = 38] = "AD_ADDDESKTOP_SUCCESS", 
    i[i.AD_ADDDESKTOP_FAIL = 39] = "AD_ADDDESKTOP_FAIL", i[i.OPEN_CUSTOMER_SUCCESS = 40] = "OPEN_CUSTOMER_SUCCESS", 
    i[i.OPEN_CUSTOMER_FAILED = 41] = "OPEN_CUSTOMER_FAILED", i[i.OPEN_CUSTOMER_COMPLETE = 42] = "OPEN_CUSTOMER_COMPLETE", 
    i[i.SEND_CUSTOMER_SUCCESS = 43] = "SEND_CUSTOMER_SUCCESS", i[i.SEND_CUSTOMER_FAILED = 44] = "SEND_CUSTOMER_FAILED", 
    i[i.EC_STAT_STAGE_ERR = 45] = "EC_STAT_STAGE_ERR", i[i.EC_STAT_EVENT_ERR = 46] = "EC_STAT_EVENT_ERR", 
    e.WSErrorCode = void 0, (r = e.WSErrorCode || (e.WSErrorCode = {}))[r.EC_NET_UNKNOWN_ERR = 3e3] = "EC_NET_UNKNOWN_ERR", 
    r[r.EC_NET_TIMEOUT = 3001] = "EC_NET_TIMEOUT", r[r.EC_NET_RECONNECT = 3002] = "EC_NET_RECONNECT", 
    r[r.EC_NET_CLOSED = 3003] = "EC_NET_CLOSED", r[r.EC_NET_SEND_ERR = 3004] = "EC_NET_SEND_ERR", 
    r[r.EC_NET_RECEIV_ERR = 3005] = "EC_NET_RECEIV_ERR", e.SdkErrorCode = void 0, (a = e.SdkErrorCode || (e.SdkErrorCode = {}))[a.SUCCESS = 0] = "SUCCESS", 
    a[a.EC_TOKEN_EXPIRED_ERR = 1] = "EC_TOKEN_EXPIRED_ERR", a[a.EC_CUSTOM_SERVICE_ERR = 2] = "EC_CUSTOM_SERVICE_ERR", 
    a[a.EC_PROFILE_AUTH_ERR = 3] = "EC_PROFILE_AUTH_ERR", a[a.EC_QUERY_PARAM_EXCEPTION = 4] = "EC_QUERY_PARAM_EXCEPTION", 
    a[a.EC_VERIFY_CODE_ERR = 5] = "EC_VERIFY_CODE_ERR", a[a.EC_CREATE_USER_ERR = 6] = "EC_CREATE_USER_ERR", 
    a[a.EC_SHAREINFO_CLEAR_ERR = 7] = "EC_SHAREINFO_CLEAR_ERR", a[a.EC_SHAREQUERY_ERR = 8] = "EC_SHAREQUERY_ERR", 
    a[a.EC_SHARECONFIG_ERR = 9] = "EC_SHARECONFIG_ERR", a[a.EC_GIFT_STATE_ERR = 10] = "EC_GIFT_STATE_ERR", 
    a[a.EC_MAIL_INFO_ERR = 11] = "EC_MAIL_INFO_ERR", a[a.EC_MAIL_SEND_ERR = 12] = "EC_MAIL_SEND_ERR", 
    a[a.EC_MAIL_OPEN_ERR = 13] = "EC_MAIL_OPEN_ERR", a[a.EC_FAVORITE_REWARD_ERR = 14] = "EC_FAVORITE_REWARD_ERR", 
    a[a.EC_RANK_SCORE_ERR = 15] = "EC_RANK_SCORE_ERR", a[a.EC_RANK_INFO_ERR = 16] = "EC_RANK_INFO_ERR", 
    a[a.EC_IP_QUERY_ERR = 17] = "EC_IP_QUERY_ERR", a[a.EC_STAT_STAGE_ERR = 18] = "EC_STAT_STAGE_ERR", 
    a[a.EC_STAT_EVENT_ERR = 19] = "EC_STAT_EVENT_ERR", a[a.EC_ACCESS_TOKEN_ERR = 20] = "EC_ACCESS_TOKEN_ERR", 
    a[a.EC_IDENTITY_ERR = 21] = "EC_IDENTITY_ERR", a[a.EC_WHITENAME_ERR = 22] = "EC_WHITENAME_ERR", 
    e.GetRewardSDKWay = void 0, (o = e.GetRewardSDKWay || (e.GetRewardSDKWay = {})).NORMAL = "normal", 
    o.AUTO = "auto", o.SHARE = "share", o.VIDEO = "video", o.INSERT = "insert", e.VideoState = void 0, 
    (d = e.VideoState || (e.VideoState = {}))[d.UNLOAD = 0] = "UNLOAD", d[d.ENABLED = 1] = "ENABLED", 
    d[d.UNENABLED = 2] = "UNENABLED", d[d.SHOW_START = 3] = "SHOW_START", d[d.SHOW_SUCCESS = 4] = "SHOW_SUCCESS", 
    d[d.SHOW_FAIL = 5] = "SHOW_FAIL", e.AdState = void 0, (l = e.AdState || (e.AdState = {}))[l.LOADING = 1] = "LOADING", 
    l[l.LOAD = 2] = "LOAD", l[l.LOAD_FAIL = 3] = "LOAD_FAIL", l[l.DELETING = 4] = "DELETING", 
    e.RequestState = void 0, (h = e.RequestState || (e.RequestState = {}))[h.REQUEST = 1] = "REQUEST", 
    h[h.SUCCESS = 2] = "SUCCESS", h[h.FAIL = 3] = "FAIL", e.BlackAndWhite = void 0, 
    (c = e.BlackAndWhite || (e.BlackAndWhite = {})).Black = "black", c.White = "white", 
    c.White_ = "white_", c.PreWhite = "preWhite", e.FollowedState = void 0, (g = e.FollowedState || (e.FollowedState = {}))[g.NotGot = 1] = "NotGot", 
    g[g.Followed = 2] = "Followed", g[g.Unfollowed = 3] = "Unfollowed", g[g.NotSupport = 4] = "NotSupport", 
    e.AddDeskState = void 0, (u = e.AddDeskState || (e.AddDeskState = {}))[u.NotGot = 1] = "NotGot", 
    u[u.Add = 2] = "Add", u[u.NotAdd = 3] = "NotAdd", u[u.FailAdd = 4] = "FailAdd", 
    e.NativeAdType = void 0, (_ = e.NativeAdType || (e.NativeAdType = {}))[_.ICON = 1] = "ICON", 
    _[_.BANNER = 2] = "BANNER", _[_.NATIVE = 3] = "NATIVE", _[_.NATIVE_MID = 4] = "NATIVE_MID", 
    _[_.NATIME_BOTTOM = 5] = "NATIME_BOTTOM", e.GameBoxType = void 0, (S = e.GameBoxType || (e.GameBoxType = {}))[S.BannerAd_Old = 1] = "BannerAd_Old", 
    S[S.BannerAd_New = 2] = "BannerAd_New", S[S.PortalAd = 3] = "PortalAd", S[S.DrawerAd = 4] = "DrawerAd", 
    S[S.BallAd = 5] = "BallAd";
    class E {
        constructor(e) {
            this.source = e.source || "Unknown", e.bindCtrlGId && (this.bindCtrlGId = e.bindCtrlGId), 
            e.id && (this.id = e.id), e.queryParam && (this.queryParam = e.queryParam), e.title && (this.title = e.title), 
            e.imgUrl && (this.imgUrl = e.imgUrl), e.type && (this.type = e.type), e.templateId && (this.templateId = e.templateId), 
            e.forever && (this.forever = e.forever);
        }
    }
    class I {}
    I.LOGIN = {
        uri: "/login"
    }, I.LOGINNOAUTU = {
        uri: "/login/noauth"
    }, I.CUSTOMSERVICE_CHECK = {
        uri: "/customservice/msg/:appId",
        method: "GET",
        encrypt: !1
    }, I.CUSTOMSERVICE_MSG = {
        uri: "/customservice/msg/:appId",
        method: "POST",
        encrypt: !1
    }, I.CUSTOMSERVICE_QUERY = {
        uri: "/customservice/query",
        method: "GET"
    }, I.DATASTUB = {
        uri: "/datastub"
    }, I.PROFILE = {
        uri: "/profile"
    }, I.SHAREINFO = {
        uri: "/share/info",
        method: "GET"
    }, I.SHAREQUERY = {
        uri: "/share/query"
    }, I.SHARECLEAR = {
        uri: "/share/clear"
    }, I.GIFTSTATE = {
        uri: "/giftstate"
    }, I.FAVORITEREWARD = {
        uri: "/favoriteReward"
    }, I.MAILINFO = {
        uri: "/mail/info",
        method: "GET"
    }, I.MAILSEND = {
        uri: "/gm/sendmail"
    }, I.MAILOPEN = {
        uri: "/mail/open"
    }, I.RANKSCORE = {
        uri: "/rank/score"
    }, I.RANKINFO = {
        uri: "/rank/info",
        method: "GET"
    }, I.IPQUERY = {
        uri: "/ip/query",
        method: "GET"
    }, I.IPQUERY_EX = {
        uri: "/ip/queryex",
        method: "GET",
        encrypt: !1
    }, I.STATSTAGE = {
        uri: "/statistics/stage"
    }, I.STATEVENT = {
        uri: "/statistics/event"
    }, I.SAVEDATA = {
        uri: "/save"
    }, I.VOTE = {
        uri: "/vote"
    }, I.VOTERANK = {
        uri: "/voterank"
    }, I.ACCESSTOKEN = {
        uri: "/access/token",
        method: "GET"
    }, I.IDENTITY = {
        uri: "/id/query"
    }, I.WHITELIST = {
        uri: "/white/query",
        method: "GET",
        encrypt: !0
    }, I.OPID = {
        uri: "/opid",
        method: "GET",
        encrypt: !0
    };
    class p {
        constructor(e) {
            let t = e.method || "POST", s = p.getDefinedMsg(t, e.uri);
            if (!s) throw Error(`not found msg with uri: ${e.uri} ${t} !!!`);
            this.url = s.uri, this.method = s.method, this.encrypt = s.encrypt;
        }
        static register(e) {
            for (const t in e) if (Object.prototype.hasOwnProperty.call(e, t)) {
                let s = e[t];
                if (!s.uri) continue;
                let n = s.method || "POST", i = this.getKey(n, s.uri);
                if (p.MSG_DEFINES[i]) throw Error("duplicate msg register !!!");
                let r = !0;
                !1 === s.encrypt && (r = !1), p.MSG_DEFINES[i] = {
                    uri: s.uri,
                    method: n || "POST",
                    encrypt: r
                };
            }
        }
        static getKey(e, t) {
            return e + ":" + t;
        }
        static getDefinedMsg(e, t) {
            let s = this.getKey(e, t);
            return this.MSG_DEFINES[s];
        }
    }
    p.MSG_DEFINES = {}, p.register(I);
    class f {}
    f.E_SERVER_LOGIN = "SERVER_LOGIN", f.E_SERVER_RELOGIN = "SERVER_RELOGIN", f.E_SHARE_INFO = "SHARE_INFO", 
    f.E_SHARE_CONFIG = "SHARE_CONFIG", f.E_SHARE_QUERY_USERINFO = "SHARE_QUERY_USERINFO", 
    f.E_PROFILE_RESULT = "PROFILE_RESULT", f.E_FAVORITE_REWARD_RESULT = "FAVORITE_REWARD_RESULT", 
    f.E_MAIL_RESULT = "$MAIL_RESULT", f.E_MAIL_OPENED = "$MAIL_OPENED", f.E_RANK_RESULT = "$RANK_RESULT", 
    f.E_IP_RESULT = "$IP_RESULT", f.E_ACCESS_TOKEN_RESULT = "$ACCESS_TOKEN_RESULT", 
    f.E_IDENTIFICTAION_RESULT = "$IDENTIFICATION_RESULT", f.E_WHITELIST_RESULT = "$WHITELIST_RESULT", 
    f.E_OPENID = "$OPENID";
    class A extends fx.BaseLogic {
        constructor() {
            super(), this.saveTimestamp = this.errCount = 0, this.GameCfg = adm.Adm.GameCfg;
        }
        static get instance() {
            return this._instance || (this._instance = new A()), this._instance;
        }
        send(e, t, s, n) {
            if (!(n = n || this.GameCfg.server_url)) return void console.log("send message skipped with server url is unknown !!!");
            if (!e.data) return void console.log("send message without data !!!" + typeof e);
            let i = new fx.Http(e.encrypt), r = n + e.url;
            i.registerErrHandler(this.errorRsp.bind(this, s, e.url), this), i.send(r, e.data, this.response.bind(this, t, s), this, e.method);
        }
        response(t, s, n) {
            n.code == e.SdkErrorCode.SUCCESS ? t && t.call(this, n.data, n) : s && s.call(this, n);
        }
        errorRsp(t, s, n) {
            if ("string" != typeof n || -1 == n.indexOf("401")) if (t) t.call(this, n); else {
                if ("object" == typeof n && n.code == fx.BaseCode.HTTP_INTERFACE_UNDEFINED) return void console.warn(s + " 接口未定义！");
                fx.Utils.isOnMiniGame() && (this.errCount++, this.errCount > 3 && (this.errCount = 0, 
                this.event(f.E_SERVER_LOGIN, {
                    code: e.SdkCode.SERVER_LOGIN_ERROR
                })));
            } else s == I.SAVEDATA.uri ? this.event(f.E_SERVER_RELOGIN) : console.warn(s + " 接口未授权！");
        }
        login(t, s) {
            let n = new p(I.LOGIN), i = new e.SDKEntity.LoginEntityRst();
            i.code = t, i.appId = this.GameCfg.appId, i.version = this.GameCfg.version, i.shareQuery = s, 
            i.userInfo = new e.SDKEntity.UserInfoEntity(), i.userInfo.platform = this.GameCfg.platform;
            let r = fx.UserLogic.instance.getMine();
            i.userInfo.openId = r.openId, n.data = i, this.send(n, this.loginRsp, this.loginErr);
        }
        loginNoAuth() {
            let t = new p(I.LOGINNOAUTU), s = new e.SDKEntity.LoginEntityRst();
            s.userInfo = new e.SDKEntity.UserInfoEntity(), s.version = this.GameCfg.version, 
            s.userInfo.platform = e.SDKEntity.PlatformType.PC, s.code = this.GameCfg.user_unique_id;
            let n = fx.UserLogic.instance.getMine();
            s.userInfo.headUrl = n.headUrl, s.userInfo.name = n.name, t.data = s, this.send(t, this.loginRsp, this.loginErr);
        }
        loginRsp(t) {
            if (console.log("服务器登录成功!"), t.lastTime && (t.lastTime = new Date(t.lastTime)), 
            t.serverTime = new Date(t.serverTime), t.record) {
                let e = window.pako.inflate(t.record, {
                    to: "string"
                });
                e = JSON.parse(decodeURIComponent(e)), fx.Utils.assign(t.userInfo, e, !1);
            }
            this.event(f.E_SERVER_LOGIN, {
                code: e.SdkCode.SERVER_LOGIN_SUCCESS,
                pkg: t
            });
        }
        loginErr(t) {
            t.msg && console.warn(t.msg), this.event(f.E_SERVER_LOGIN, {
                code: e.SdkCode.SERVER_LOGIN_FAILED
            });
        }
        postProfile(e) {
            let t = new p(I.PROFILE);
            t.data = e, this.send(t, this.postProfileRsp);
        }
        postProfileRsp() {
            this.event(f.E_PROFILE_RESULT);
        }
        getShareInfo(t) {
            let s = new p(I.SHAREINFO), n = new e.SDKEntity.ShareInfoRst();
            n.shareTypes = t, s.data = n, this.send(s, this.getShareInfoRsp);
        }
        getShareInfoRsp(e) {
            this.event(f.E_SHARE_INFO, e);
        }
        postShareQuery(t) {
            let s = new p(I.SHAREQUERY), n = new e.SDKEntity.ShareQueryRst();
            n.param = t, s.data = n, this.send(s, this.postShareQueryRsp);
        }
        postShareQueryRsp(e) {
            e.fromUserInfo && this.event(f.E_SHARE_QUERY_USERINFO, e.fromUserInfo);
        }
        postGiftState(t, s, n) {
            let i = new p(I.GIFTSTATE), r = new e.SDKEntity.GiftStateUpdateRst();
            r.state = n, r.userId = t, r.type = s, i.data = r, this.send(i);
        }
        clearShareInfo(t) {
            let s = new p(I.SHARECLEAR), n = new e.SDKEntity.ShareClearRst();
            n.param = t, s.data = n, this.send(s);
        }
        postFavoriteReward() {
            let t = new p(I.FAVORITEREWARD), s = new e.SDKEntity.CommonRst();
            t.data = s, this.send(t, this.postFavoriteRewardRsp);
        }
        postFavoriteRewardRsp(e) {
            this.event(f.E_FAVORITE_REWARD_RESULT);
        }
        dataStub(t, s) {
            let n = new p(I.DATASTUB), i = new e.SDKEntity.DataStubRst();
            i.type = t, i.args = s, n.data = i, this.send(n);
        }
        getMailInfo() {
            let t = new p(I.MAILINFO);
            t.data = new e.SDKEntity.CommonRst(), this.send(t, this.getMailInfoRsp);
        }
        getMailInfoRsp(e) {
            this.event(f.E_MAIL_RESULT, e);
        }
        openMail(t) {
            let s = new p(I.MAILOPEN), n = new e.SDKEntity.MailOpenRst();
            n.ids = t, s.data = n, this.send(s, this.openMailRsp);
        }
        openMailRsp(e) {
            this.event(f.E_MAIL_OPENED, e);
        }
        sendMail(t, s, n, i) {
            let r = new p(I.MAILSEND), a = new e.SDKEntity.MailSendRst();
            a.mail = i, a.userName = t, a.password = s, a.userId = n, r.data = a, this.send(r);
        }
        reportedRankScore(t) {
            let s = new p(I.RANKSCORE), n = new e.SDKEntity.RankScoreRst();
            n.score = t, s.data = n, this.send(s);
        }
        getRankInfo() {
            let t = new p(I.RANKINFO), s = new e.SDKEntity.RankInfoRst();
            s.count = 50, s.page = 0, t.data = s, this.send(t, this.getRankInfoRsp);
        }
        getRankInfoRsp(e) {
            this.event(f.E_RANK_RESULT, e);
        }
        getIpQueryInfo() {
            let t = this.GameCfg.server_url_common;
            if (t) {
                let s = new p(I.IPQUERY);
                s.data = new e.SDKEntity.IpQueryRst(), this.send(s, this.getIpQueryInfoRsp, this.getIpQueryInfoRspFail, t);
            }
        }
        getIpQueryInfoRsp(e) {
            this.event(f.E_IP_RESULT, e);
        }
        getIpQueryInfoRspFail(e) {
            console.log(JSON.stringify(e));
        }
        postStageStat(t, s, n) {
            let i = new p(I.STATSTAGE), r = new e.SDKEntity.StatStageRst();
            r.stageId = t, r.stageState = s, r.stageResult = n, i.data = r, this.send(i);
        }
        postEventStat(t) {
            let s = new p(I.STATEVENT), n = new e.SDKEntity.StatEventRst();
            n.eventName = t, s.data = n, this.send(s);
        }
        save(t) {
            let s = Laya.Browser.now(), n = this.GameCfg.saveDurSec;
            if (fx.Utils.isNumber(n) && s - this.saveTimestamp > 1e3 * n) {
                let n = new p(I.SAVEDATA), i = new e.SDKEntity.SaveDataRst();
                const r = window.pako;
                t.savedTimestamp = s;
                try {
                    i.record = r.deflate(encodeURIComponent(JSON.stringify(t)), {
                        to: "string"
                    });
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    return void console.error("userData stringify error !!!\n" + e.message + e.stack);
                }
                n.data = i, this.send(n), this.saveTimestamp = s;
            }
        }
        getAccessToken(t) {
            let s = this.GameCfg.server_url_common;
            if (s && t) {
                let n = new p(I.ACCESSTOKEN), i = new e.SDKEntity.AccessTokenRst();
                i.appId = t, n.data = i, this.send(n, this.getAccessTokenRsp, this.getAccessTokenRspFail, s);
            }
        }
        getAccessTokenRsp(e) {
            this.event(f.E_ACCESS_TOKEN_RESULT, e);
        }
        getAccessTokenRspFail(e) {
            console.log("获取凭证失败：", JSON.stringify(e));
        }
        identification(t, s, n) {
            let i = new e.SDKEntity.IdInfoPkg();
            i.identity = s, i.realName = t, i.userId = n;
            let r = new Laya.Byte();
            r.writeUTFBytes(JSON.stringify(i));
            let a = new e.SDKEntity.IdentityRst();
            a.code = fx.Base64Encrypt.encodeByte(r);
            let o = new p(I.IDENTITY);
            o.data = a;
            let d = this.GameCfg.server_url_common;
            d && this.send(o, this.identificationRsp, this.identificationErr, d);
        }
        identificationRsp(e, t) {
            this.event(f.E_IDENTIFICTAION_RESULT, t);
        }
        identificationErr(e) {
            console.log("认证失败：", JSON.stringify(e)), this.event(f.E_IDENTIFICTAION_RESULT, e);
        }
        getVideoWhiteList(t) {
            let s = new Laya.Byte();
            s.writeUTFBytes(JSON.stringify(t));
            let n = new e.SDKEntity.WhiteQueryRst();
            n.whiteName = fx.Base64Encrypt.encodeByte(s);
            let i = new p(I.WHITELIST);
            i.data = n;
            let r = this.GameCfg.server_url_common;
            r && this.send(i, this.getVideoWhiteListRsp, this.getVideoWhiteListErr, r);
        }
        getVideoWhiteListRsp(e) {
            this.event(f.E_WHITELIST_RESULT, e);
        }
        getVideoWhiteListErr(e) {
            console.log("获取白名单失败：", JSON.stringify(e));
        }
        getOpenId(t, s) {
            let n = new e.SDKEntity.OpenIdRst();
            n.appid = t, n.js_code = s, n.platform = this.GameCfg.platform;
            let i = new p(I.OPID);
            i.data = n;
            let r = this.GameCfg.server_url_common;
            r && this.send(i, this.getOpenIdRsp, this.getOpenIdErr, r);
        }
        getOpenIdRsp(e) {
            this.event(f.E_OPENID, e);
        }
        getOpenIdErr(e) {
            console.log("获取openid失败：", JSON.stringify(e));
        }
    }
    class C extends fx.BaseLogic {
        constructor() {
            super(), this.friendHead = null, this.retryCount = 3, this.ipQueryRsp = void 0, 
            this._requestState = e.RequestState.FAIL, this._adIds = void 0, this.fromSceneValues = [], 
            console.log("FrameSdk Ver: 2.0.076");
            let t = fx.Utils.isOnPC() ? e.SDKEntity.PlatformType.PC : C.GameCfg.platform, s = Laya.ClassUtils.getRegClass(t);
            if (!s) throw Error(`unknown platform !!! ${t}`);
            this.loginInst = new s(), console.log(`current platform: ${t}`), this.shareInst = this.loginInst.getShareInstance(), 
            this.adInst = this.loginInst.getAdvInstance(), this.payInst = this.loginInst.getPayInstance();
            let n = C.GameCfg.stat;
            if (n) {
                let e = Laya.ClassUtils.getRegClass(n);
                if (!e) throw Error("unknown stat Module !!!");
                this.statInst = new e();
            } else this.statInst = this.loginInst.getStatInstance();
            this.gameStartTime = fx.Utils.getTime();
        }
        get curEnterSceneId() {
            return this._curEnterSceneId;
        }
        set curEnterSceneId(e) {
            this._curEnterSceneId = e;
        }
        get requestState() {
            return this._requestState;
        }
        set requestState(e) {
            this._requestState = e;
        }
        static sInit(e) {
            this.GameCfg = e;
        }
        static get instance() {
            return this._instance || (this._instance = new C()), this._instance;
        }
        static isOnPC() {
            return this.GameCfg.platform == t.PC;
        }
        static isOnVivo() {
            return this.GameCfg.platform == t.VIVO;
        }
        static isOnToutiao() {
            return this.GameCfg.platform == t.TT;
        }
        static isOnBaidu() {
            return this.GameCfg.platform == t.BAIDU;
        }
        static isOnOppo() {
            return this.GameCfg.platform == t.OPPO;
        }
        static isOnNativeXiaoMi() {
            return this.GameCfg.platform == t.NATIVE_XIAOMI;
        }
        static isOnXiaoMi() {
            return this.GameCfg.platform == t.XIAOMI;
        }
        static isOnWeiXin() {
            return this.GameCfg.platform == t.WEIXIN;
        }
        static isOnTapTap() {
            return this.GameCfg.platform == t.NATIVE_TAPTAP;
        }
        static isOnNativeAndroid() {
            return this.GameCfg.platform == t.NATIVE_ANDROID;
        }
        static isOnNativeIos() {
            return this.GameCfg.platform == t.NATIVE_IOS;
        }
        static isOnQQ() {
            return this.GameCfg.platform == t.QQ;
        }
        static isOnKuaiShou() {
            return this.GameCfg.platform == t.KUAISHOU;
        }
        static isOnHuaWei() {
            return this.GameCfg.platform == t.HUAWEI;
        }
        static isOnFTNN() {
            return this.GameCfg.platform == t.FTNN;
        }
        static isOnFTNNBOX() {
            return this.GameCfg.platform == t.FTNNBOX;
        }
        static isOnTTFF() {
            return this.GameCfg.platform == t.TTFF;
        }
        initMiniAdapter() {
            this.loginInst.initMiniAdapter();
        }
        getMiniAdapter() {
            return this.loginInst.getMiniAdapter();
        }
        afterEngineInit(e, t) {
            this.loginInst.setKeepScreenOn({
                keepScreenOn: !0
            }), this.loginInst.onShow(t), this.loginInst.onHide(e), this.loginInst.engineInitialized();
        }
        onInitOnce() {
            this.on(n.E_SDK_LOGIN, this, this.loginSuccess), this.on(fx.BaseEvent.E_APP_ON_RESUME, this, this.onResume), 
            A.instance.on(f.E_SERVER_LOGIN, this, this.onMsgServerLogin), A.instance.on(f.E_SERVER_RELOGIN, this, this.logout), 
            A.instance.on(f.E_SHARE_INFO, this, this.onMsgShareInfo), A.instance.on(f.E_SHARE_QUERY_USERINFO, this, this.onMsgShareQuery), 
            A.instance.on(f.E_PROFILE_RESULT, this, this.onMsgProfile), A.instance.on(f.E_IP_RESULT, this, this.onMsgGetIP), 
            fx.UserLogic.instance.init(), this.login(), A.instance.getIpQueryInfo();
        }
        login() {
            this._isLoginServer = 0, this.loginInst.login();
        }
        checkSession(e) {
            this.loginInst.checkSession(e);
        }
        logout() {
            fx.EventCenter.instance.event(n.E_SDK_LOGOUT);
        }
        onResume(e) {
            if (C.isOnWeiXin() && !fx.Utils.isOnPC()) {
                console.log("Adm OnResume:" + JSON.stringify(e)), e && e.scene && (e.scene = Number(e.scene)), 
                this.loginInst && this.loginInst.onResume(e);
                let t = -1;
                if (e && e.scene && (t = e.scene), -1 == t) {
                    let e = this.getLaunchOptionsSync();
                    e && e.scene && e.scene;
                }
                -1 !== t && -1 === this.fromSceneValues.indexOf(t) && this.fromSceneValues.push(t), 
                this.judgeBAndW({
                    sceneId: t
                }), this.curEnterSceneId = t;
            }
        }
        wxAuth(e, t, s) {
            return (!this.serverCfg || !this.serverCfg.isAuthorized) && (!this.loginInst.isAuth() && (e && this.loginInst.auth(e), 
            t && s && t.on(n.E_USER_INFO, t, s), !0));
        }
        getLocalAuth() {
            return !this.loginInst.isAuth();
        }
        onMsgProfile() {
            this.serverCfg && (this.serverCfg.isAuthorized = !0);
        }
        wxDestroyAuthBtn() {
            this.serverCfg && this.serverCfg.isAuthorized || this.loginInst && this.loginInst.destroyUserInfoButton();
        }
        loginSuccess(t) {
            t.code == e.SdkCode.WX_LOGIN_SUCCESS ? this.loginInst.loginServerEnable() || this.complete() : this.showModal("平台登录失败~ 请稍后尝试重新打开游戏。", "糟糕", "Exit", Laya.Handler.create(this, () => {
                this.loginInst.exit();
            }), "");
        }
        onMsgServerLogin(t) {
            let s = t.code;
            if (s == e.SdkCode.SERVER_LOGIN_SUCCESS) {
                let e = t.pkg;
                this.serverCfg = e.userCfg, this.fromUserInfo = e.fromUserInfo, fx.UserLogic.instance.update(e.userInfo), 
                this._isLoginServer = 1, this.complete(e);
            } else s == e.SdkCode.SERVER_LOGIN_ERROR ? console.error("无法连接服务器 !!!") : console.error("服务器登录失败 !!!"), 
            this._isLoginServer = -1, this.complete();
        }
        complete(e) {
            if (this.getServerJsonCfg(), this.event(n.E_SDK_INIT_OK, e), fx.Utils.isOnMiniGame() && this.loginInst) {
                let e = this.getLaunchOptionsSync();
                console.log("adm Login success with " + JSON.stringify(e));
                let t = -1;
                e && e.scene && (t = e.scene), -1 !== t && -1 === this.fromSceneValues.indexOf(t) && this.fromSceneValues.push(t), 
                this.judgeBAndW({
                    sceneId: t
                }), this.curEnterSceneId = t;
            }
        }
        getFavoriteReward(e, t, s = !0) {
            -1 != this.fromSceneValues.indexOf(1089) ? this.isServerEnable() ? this.serverCfg && !this.serverCfg.favoriteReward && (A.instance.postFavoriteReward(), 
            A.instance.once(f.E_FAVORITE_REWARD_RESULT, this, () => {
                this.serverCfg.favoriteReward = !0, this.event(n.E_FAVORITE_REWARD);
            }), e && t && e.once(n.E_FAVORITE_REWARD, e, t)) : e && t && e.once(n.E_FAVORITE_REWARD, e, t) : s && fx.Utils.showTips("请从我的小程序进入游戏后再来领取奖励吧~");
        }
        setServerCfg(e) {
            this.serverCfg = e, this.event(n.E_SERVER_CFG_UPDATE, this.serverCfg);
        }
        getServerCfg() {
            return this.serverCfg;
        }
        showRank() {
            let e = Laya.ClassUtils.getRegClass("WXRank");
            fx.SceneManager.openPanel(e, {
                effectFunc: fx.SceneManager.EF_QSCALE_IN,
                from: "Adm"
            });
        }
        enableShare(e, t) {
            fx.Utils.isOnMiniGame() && this.shareInst && this.shareInst.setShare(e, t);
        }
        share(t, s, n) {
            if (this.shareInst) if (t instanceof E) {
                if (!t.title && !t.imgUrl) {
                    let e = this.getServerJsonCfgShareCfg();
                    if (e) {
                        let s = null;
                        s = t.type ? e[t.type] : fx.Utils.randomInArray(e), s && (t.title = s.title, t.imgUrl = s.image);
                    }
                    t.title || t.imgUrl || (t.title = C.GameCfg.local_share_title, t.imgUrl = C.GameCfg.local_share_image);
                }
                this.shareInst.share(t);
            } else {
                let i = null, r = null, a = null, o = null;
                if (t ? t instanceof e.SDKEntity.ShareQueryParam ? (s && n ? (i = s, r = n) : a = t.shareType, 
                o = t) : "number" == typeof t ? a = t : "string" == typeof t && (i = t, r = s) : (i = C.GameCfg.local_share_title, 
                r = C.GameCfg.local_share_image), !i && !r) {
                    let e = this.getServerJsonCfgShareCfg();
                    if (e) {
                        let t = null;
                        t = a ? e[a] : fx.Utils.randomInArray(e);
                    }
                }
                this.shareInst.share(i, r, o);
            }
        }
        shareCustom(e, t, s, n, i) {
            this.shareInst && this.shareInst.shareCustom(e, t, s, n, i);
        }
        onMsgShareInfo(e) {
            this.shareData = e, this.event(n.E_GET_SHARE_INFO, e);
        }
        onMsgShareQuery(e) {
            this.fromUserInfo = e, this.event(n.E_SHARE_QUERY_INFO);
        }
        getShareInfo(e, t, s) {
            t.once(n.E_GET_SHARE_INFO, t, s), A.instance.getShareInfo(e);
        }
        getShareQueryInfo() {
            if (this.loginInst) {
                let e = this.loginInst.getQuery(), t = this.fromUserInfo;
                if (e = this.loginInst.getQuery(), e && t) return t.name || (t.name = fx.CfgMgr.instance.getStr("unauthorized")), 
                {
                    query: e,
                    fromUserInfo: t
                };
            }
        }
        getQueryInfo() {
            if (this.loginInst && this.loginInst.getQuery) return this.loginInst.getQuery();
        }
        preloadVideo(e, t) {
            this.adInst && (e || (e = this.getVideoId()), e && this.adInst.preloadVideo(e, t));
        }
        isHasVideo(t) {
            if (!this.adInst) return e.VideoState.UNENABLED;
            if (t || (t = this.getVideoId()), !t) return e.VideoState.UNENABLED;
            let s = this.adInst.getVideoState(t);
            return this.isAudit() && C.GameCfg.platform !== e.SDKEntity.PlatformType.FTNN && (s = e.VideoState.ENABLED), 
            s;
        }
        playVideo(t, s) {
            this.adInst ? (t || (t = this.getVideoId()), t && this.adInst.playVideo(t, s)) : this.event(n.E_AD_VIDEO, {
                code: e.SdkCode.AD_VIDEO_SUCCESS
            });
        }
        autoPlayVideo() {
            if (!this.isHarvest()) return void console.log("### autoPlayVideo n sg!!!");
            let e = this.getServerJsonCfg();
            e ? (console.log(`### autoPlayVideo ${e.autoPlayVideo_startLev}-${e.autoPlayVideo_spaceLev}-${e.autoPlayVideo_startLoginDays}`), 
            this.checkStageOnoff(e.autoPlayVideo_startLev, e.autoPlayVideo_spaceLev, {
                startDay: e.autoPlayVideo_startLoginDays
            }) && (console.log("### auto play"), this.playVideo())) : console.log("### autoPlayVideo 配置为空!!!");
        }
        preloadBanner(e, t) {
            this.adInst && (e || (e = this.getBannerId()), e && this.adInst.preloadBanner(e, t));
        }
        showBanner(e, t) {
            this.adInst && (e || (e = this.getBannerId()), e && this.adInst.showBanner(e, t));
        }
        hideBanner(e, t = !0) {
            this.adInst && (e || (e = this.getBannerId()), e && this.adInst.hideBanner(e, t));
        }
        getBanner(e) {
            if (this.adInst && (e || (e = this.getBannerId()), e)) return this.adInst.getBannerById(e);
        }
        getBannerTopEdgeBottom() {
            let t = this.getBanner();
            if (!t) return 0;
            if (t.state !== e.AdState.LOAD) return 0;
            let s = this.getSystemInfo(), n = t.inst.style.height * s.pixelRatio;
            return -1 !== s.system.indexOf("iOS") && fx.Utils.isQMP() && (n += 24), n;
        }
        getBannerTopPos() {
            if (fx.Utils.isOnMiniGame()) {
                let e = this.getBanner();
                if (e && e.inst && e.inst.style && e.inst.style.top && this.getSystemInfo().screenHeight) return e.inst.style.top / this.getSystemInfo().screenHeight * Laya.stage.height;
            }
            return null;
        }
        preloadInterstitial(e) {
            this.adInst && (e || (e = this.getInterstitialId()), e && this.adInst.preloadInterstitial(e));
        }
        showInterstitial(e, t) {
            this.adInst && (e || (e = this.getInterstitialId()), e && this.adInst.showInterstitial(e, t));
        }
        getInterstitial(e) {
            if (this.adInst && (e || (e = this.getInterstitialId()), e)) return this.adInst.getInterstitialById(e);
        }
        showFullScreenVideo(e) {
            this.adInst && this.adInst.showFullScreenVideo && this.adInst.showFullScreenVideo(e);
        }
        preloadNativeAd(e, t) {
            this.adInst && (e || (e = this.getNativeAdId()), this.adInst.preloadNativeAd(e, t));
        }
        showNativeAd(e, t) {
            this.adInst && this.adInst.showNativeAd(e, t);
        }
        destoryNativeAd(e) {
            this.adInst && this.adInst.destoryNativeAd(e);
        }
        reportAdClickNativeAd() {
            this.adInst && this.adInst.reportAdClickNativeAd();
        }
        getNativeAdData(e) {
            this.adInst && this.adInst.getNativeAdData(e);
        }
        preloadAppbox(e) {
            this.adInst && (e || (e = this.getAppBoxId()), e && this.adInst.preloadAppbox(e));
        }
        showAppBox(e, t) {
            this.adInst && this.getAppBoxData() && (e || (e = this.getAppBoxId()), e && this.adInst.showAppBox(e, t));
        }
        hideAppBox(e, t) {
            this.adInst && (e || (e = this.getAppBoxId()), e && this.adInst.hideAppBox(e, t));
        }
        getAppBoxData() {
            if (this.adInst) return this.adInst.getAppBoxData();
        }
        autoShowAppBox() {
            if (!this.isHarvest()) return console.log("### autoShowAppBox sh!!!"), !1;
            let e = this.getServerJsonCfg();
            return e ? (console.log(`### autoShowAppBox ${e.appbox_StartLev}-${e.appbox_SpaceLev}`), 
            !!this.checkStageOnoff(e.appbox_StartLev, e.appbox_SpaceLev) && (console.log("### auto play app box"), 
            this.showAppBox(), !0)) : (console.log("### autoShowAppBox 配置为空!!!"), !1);
        }
        createAppBoxBtn(e, t) {
            this.adInst && this.adInst.createAppBoxBtn(e, t);
        }
        showAppBoxBtn() {
            this.adInst && this.adInst.showAppBoxBtn();
        }
        hideAppBoxBtn() {
            this.adInst && this.adInst.hideAppBoxBtn();
        }
        destoryAppBoxBtn() {
            this.adInst && this.adInst.destoryAppBoxBtn();
        }
        showBlockAd(e, t, s, n, i, r) {
            this.adInst && (e || (e = this.getBlockId()), e && this.adInst.showBlockAd(e, {
                style: t,
                size: s,
                orientation: n,
                type: i,
                adIntervals: r
            }));
        }
        hideBlockAd(e, t) {
            this.adInst && this.adInst.hideBlockAd(e, t);
        }
        getBlockId() {
            return this.adIds ? this.adIds.blockId : null;
        }
        getBlock(e) {
            if (this.adInst && (e || (e = this.getBlockId()), e)) return this.adInst.getCustomAdById(e);
        }
        preloadBlock(e, t) {
            this.adInst && (e || (e = this.getBlockId()), e && this.adInst.preloadBlock(e, t));
        }
        isBlockShowing(e) {
            return this.adInst && e ? this.adInst.isBlockShowing(e) : null;
        }
        showCustomAd(e, t) {
            this.adInst && (e || (e = this.getCustomAdId()), e && this.adInst.showCustomAd(e, t));
        }
        hideCustomAd(e) {
            this.adInst && this.adInst.hideCustomAd(e);
        }
        getRewardStrategyInst() {
            return this.loginInst.getRewardStrInstance();
        }
        sendEvent(e, t) {
            console.log(`阿拉丁自定义事件[${e}]-[${JSON.stringify(t)}]`), this.statInst && this.statInst.sendEvent(e, t);
        }
        stageOnStart(e) {
            this.statInst && (console.log(`阿拉丁关卡统计[关卡开始]-${JSON.stringify(e)}`), this.statInst.stageOnStart(e));
        }
        stageOnRunning(e) {
            this.statInst && this.statInst.stageOnRunning(e);
        }
        stageOnEnd(e) {
            this.statInst && (console.log(`阿拉丁关卡统计[关卡结算]-${JSON.stringify(e)}`), this.statInst.stageOnEnd(e));
        }
        unlockItem(e) {
            this.statInst && this.statInst.unlockItem(e);
        }
        canRecord() {
            return !!this.shareInst && this.shareInst.canRecord();
        }
        canShareRecord() {
            return !!this.shareInst && this.shareInst.canShareRecord();
        }
        startRecord(e = 120, t = !1, s = !1) {
            this.shareInst && this.shareInst.recordVideo({
                duration: e,
                isEndlessMode: t,
                isDisposeRecord: s
            });
        }
        stopRecord(e = !1) {
            this.shareInst && this.shareInst.stopRecord(e);
        }
        shareVideo(e = !1) {
            return !!this.shareInst && this.shareInst.shareVideo(e);
        }
        record_pause() {
            this.shareInst && this.shareInst.pauseRecord();
        }
        record_resume() {
            this.shareInst && this.shareInst.resumeRecord();
        }
        record_destroy() {
            this.shareInst && this.shareInst.destroyRecord();
        }
        navigateApp(e) {
            fx.Utils.isOnPC() || this.loginInst.navigateToMiniProgram(e);
        }
        showFeedBack(e) {}
        hideFeedBack() {
            this.feedBackBtn && this.feedBackBtn.hide();
        }
        getOpenDataContext() {
            return this.loginInst.getOpenDataContext();
        }
        openCustomerServiceConversation(e) {
            this.loginInst.openCustomerServiceConversation(e || {});
        }
        getEncryptedDataIv() {
            if (C.isOnWeiXin() && this.loginInst) {
                return this.loginInst.getEncryptedData();
            }
        }
        isAudit() {
            let e = !1, t = this.getServerJsonCfgVersion();
            return fx.Utils.compareVersion(C.GameCfg.version, t) > 0 && (e = !0), e;
        }
        isHarvest() {
            if (this.isAudit()) return console.log("###=======================isHar:[sh]"), 
            !1;
            if (!this.getServerJsonCfgHarvestEnable()) return console.log("###=======================isHar:[n sh]"), 
            !1;
            if (!this.bAndWProperty) {
                let t = Laya.LocalStorage.getItem("BAndW");
                "white" === t ? this.bAndWProperty = e.BlackAndWhite.White : "black" === t ? this.bAndWProperty = e.BlackAndWhite.Black : "white_" === t ? this.bAndWProperty = e.BlackAndWhite.White_ : "preWhite" === t && (this.bAndWProperty = e.BlackAndWhite.PreWhite);
            }
            if (e.BlackAndWhite.PreWhite === this.bAndWProperty) return console.log("###=======================isHar:local?[preWhite]"), 
            !1;
            if (e.BlackAndWhite.Black === this.bAndWProperty) {
                console.log("###=======================isHar:local?[black]");
                let e = this.getServerJsonCfgChangeWhiteEnable();
                return console.log(`###=======================isHar:c changeWhite?[${e}]`), !!e && (Laya.LocalStorage.removeItem("BAndW"), 
                this.judgeBAndW({
                    sceneId: this.curEnterSceneId
                }), this.isHarvest());
            }
            let t, s, n = !0;
            if (this.isCheckIPEnabled()) {
                if (!this.ipQueryRsp) return console.log("###=======================isHar:n get ip, repeat connect"), 
                A.instance.getIpQueryInfo(), !1;
                let e = this.getServerJsonCfgUnsafeArea();
                console.log(`###=======================isHar: begin che ip, cur ipInfo[${JSON.stringify(this.ipQueryRsp)}], cfg ipInfo[${JSON.stringify(e)}]`);
                for (let i = 0; i < e.length; ++i) {
                    let r = e[i];
                    if (r && (r.city ? -1 !== r.city.indexOf(this.ipQueryRsp.city) && (n = !1) : r.province && -1 !== r.province.indexOf(this.ipQueryRsp.province) && (n = !1), 
                    !n)) {
                        s = r.safeSceneId, console.log(`###=======================isHar: not sa ip sSceneId[${JSON.stringify(t)}]`);
                        break;
                    }
                }
                t = n ? C.instance.getServerJsonCfgSafeSceneId() : s;
            } else t = C.instance.getServerJsonCfgSafeSceneId();
            let i = !0;
            if (e.BlackAndWhite.White_ === this.bAndWProperty ? s || (i = !1) : t ? -1 === t.indexOf(this.curEnterSceneId) && (i = !1) : n || (i = !1), 
            this.bAndWProperty || (i ? (this.bAndWProperty = e.BlackAndWhite.White, s ? Laya.LocalStorage.setItem("BAndW", "white_") : Laya.LocalStorage.setItem("BAndW", "white")) : (this.bAndWProperty = e.BlackAndWhite.Black, 
            Laya.LocalStorage.setItem("BAndW", "black"))), !i) {
                let e = this.getServerJsonCfgChangeWhiteEnable();
                console.log(`###=======================isHar:c changeWhite?[${e}]`), e && (Laya.LocalStorage.removeItem("BAndW"), 
                this.judgeBAndW({
                    sceneId: this.curEnterSceneId
                }), i = this.isHarvest());
            }
            return console.log(`###=======================isHar:end f[${i}]`), i;
        }
        judgeBAndW(t) {
            return this.bAndWProperty = this.loginInst.judgeBAndW(t), console.log(`###hb名单[${this.bAndWProperty}]-场景值[${t.sceneId}]`), 
            this.bAndWProperty === e.BlackAndWhite.White;
        }
        onMsgGetIP(e) {
            e && (this.ipQueryRsp = e);
        }
        getPromotionEnable() {
            if (this.isAudit()) return !1;
            let judgePromotion = () => !!t.promotionEnable && (e.BlackAndWhite.White === this.bAndWProperty || t.promotionBlackEnable), t = this.getServerJsonCfg();
            return !!t && (t.promotion_harvestConnection ? !!this.isHarvest() && judgePromotion() : judgePromotion());
        }
        getShareEnable() {
            let e = !1;
            return this.isHarvest() || (e = this.getServerJsonCfgShareEnable()), e;
        }
        getServerJsonCfg() {
            if (!this.serverJsonCfg && "" !== C.GameCfg.server_cfg_url && this.loginInst && this.requestState === e.RequestState.FAIL) {
                this.requestState = e.RequestState.REQUEST, (C.GameCfg.server_cfg_url.includes("https") ? this.loginInst.requestDecrypt.bind(this.loginInst) : this.loginInst.request.bind(this.loginInst))(C.GameCfg.server_cfg_url, null, Laya.Handler.create(this, t => {
                    if (!this.serverJsonCfg) {
                        if (this.serverJsonCfg = t, fx.EventCenter.instance.event(fx.BaseEvent.E_SERVER_CFG_COMPLETE), 
                        this.requestState = e.RequestState.SUCCESS, this.serverJsonCfg) {
                            this.serverJsonCfg.termination && Laya.stage.destroy();
                        }
                        if (fx.Utils.isOnMiniGame()) this.preloadVideo(), this.preloadBanner(null, {
                            widthScaleRate: .7
                        }), this.preloadInterstitial(), this.preloadAppbox(); else if (fx.Utils.isOnNativeAndroid() || fx.Utils.isOnNativeIos()) {
                            let e = this.loginInst.getBridgeInst();
                            e.getIsAudit(), e.getIsHarvest();
                        }
                        if (this.serverJsonCfg.shareCfg && 0 !== this.serverJsonCfg.shareCfg.length) {
                            let e = fx.Utils.randomInArray(this.serverJsonCfg.shareCfg);
                            this.enableShare(e.title, e.image);
                        }
                        if (C.isOnWeiXin() || this.getNickName(), this.judgeBAndW({
                            sceneId: this.curEnterSceneId
                        }), window.Tracker && t.logVersion == C.GameCfg.version) {
                            let e = new Tracker("cn-chengdu.log.aliyuncs.com", t.logProject, t.logStore);
                            Laya.alertGlobalError(!0, e);
                        }
                    }
                }), Laya.Handler.create(this, () => {
                    this.requestState = e.RequestState.FAIL, this.retryCount > 0 && (this.retryCount--, 
                    console.log(`获取json配置失败！重试：第${3 - this.retryCount}次`), this.getServerJsonCfg());
                }), "GET");
            }
            return this.serverJsonCfg;
        }
        againGetServerJsonCfg() {
            if (this.serverJsonCfg) {
                if ("" !== C.GameCfg.server_cfg_url && this.loginInst) {
                    (C.GameCfg.server_cfg_url.includes("https") ? this.loginInst.requestDecrypt.bind(this.loginInst) : this.loginInst.request.bind(this.loginInst))(C.GameCfg.server_cfg_url, null, Laya.Handler.create(this, e => {
                        if (this.serverJsonCfg = e, window.Tracker && e.logVersion == C.GameCfg.version) {
                            let t = new Tracker("cn-chengdu.log.aliyuncs.com", e.logProject, e.logStore);
                            Laya.alertGlobalError(!0, t);
                        }
                    }), Laya.Handler.create(this, () => {
                        console.log("重新获取json配置失败！");
                    }), "GET");
                }
            } else this.getServerJsonCfg();
        }
        getServerJsonCfgVersion() {
            let e = this.getServerJsonCfg();
            return e ? e.version : "0.0.0";
        }
        getServerJsonCfgShareEnable() {
            let e = this.getServerJsonCfg();
            return !!e && e.shareEnable;
        }
        getServerJsonCfgNavigateEnable() {
            let e = this.getServerJsonCfg();
            return !!e && e.navigateEnable;
        }
        getServerJsonCfgHarvestEnable() {
            let e = this.getServerJsonCfg();
            return !!e && Boolean(e.harvestEnable);
        }
        getServerJsonCfgShareCfg() {
            let e = this.getServerJsonCfg();
            return e ? e.shareCfg : null;
        }
        getServerJsonCfgNoticeHtmlText() {
            let e = this.getServerJsonCfg();
            return e ? e.noticeHtmlText : "";
        }
        getServerJsonCfgChangeWhiteEnable() {
            let e = this.getServerJsonCfg();
            return !!e && Boolean(e.changeWhite);
        }
        getServerJsonCfgOffEgg() {
            let e = this.getServerJsonCfg();
            return !!e && !!e.offEgg;
        }
        getServerJsonCfgShareParams() {
            let e = this.getServerJsonCfg();
            return e && e.shareParams ? e.shareParams : {
                shareFailProb: 0,
                FreshShareCntBase: 0,
                OlderShareCtnBase: 0,
                ShareSpace: 0
            };
        }
        getServerJsonCfgNavigateApplist() {
            let e = this.getServerJsonCfg();
            if (!e) return;
            if (!this.getServerJsonCfgNavigateEnable()) return;
            let t = e.navigateAppList;
            return t && t instanceof Array ? t : void 0;
        }
        getServerJsonCfgSafeSceneId() {
            let e = this.getServerJsonCfg();
            if (!e) return;
            let t = e.safeSceneId;
            return t && t instanceof Array ? t : void 0;
        }
        getServerJsonCfgUnsafeArea() {
            let e = this.getServerJsonCfg();
            if (!e) return;
            let t = e.ipUnsafeArea;
            return t && t instanceof Array ? t : void 0;
        }
        isCheckIPEnabled() {
            let e = this.getServerJsonCfg();
            if (!e) return !0;
            let t = !1, s = e.ipUnsafeArea;
            return s && 0 !== s.length && (t = !0), t;
        }
        isRedBagEnabled() {
            if (!this.isHarvest()) return !1;
            let e = this.getServerJsonCfg();
            return !!e && e.redBag_onoff;
        }
        checkFunctionOpenById(e) {
            let t = new Date(), s = `${t.getFullYear()}.${t.getMonth() + 1}.${t.getDate()}.${t.getHours()}`, n = this.getServerJsonCfg(), i = n && n.versionUpdater;
            if (i) {
                if (this.isAudit()) return !0;
                {
                    let checkServer = () => {
                        let t = i[`${e}`];
                        return !!t && fx.Utils.compareVersion(s.toString(), t.toString()) >= 0;
                    }, t = fx.CfgMgr.instance.get("versionUpdater", e);
                    return t && fx.Utils.compareVersion(s.toString(), t.toString()) >= 0 || checkServer();
                }
            }
            {
                let t = fx.CfgMgr.instance.get("versionUpdater", e);
                return !!t && fx.Utils.compareVersion(s.toString(), t.toString()) >= 0;
            }
        }
        get adIds() {
            if (void 0 === this._adIds) {
                let e = this.getServerJsonCfg();
                if (e && e.channel_AdIds) {
                    let t = e.channel_AdIds.default;
                    this.initAdIds(t);
                }
            }
            return this._adIds;
        }
        set adIds(e) {
            this.initAdIds(e);
        }
        getVideoId() {
            return this.adIds ? this.adIds.videoId : null;
        }
        getBannerId() {
            return this.adIds ? this.adIds.bannerId : null;
        }
        getInterstitialId() {
            return this.adIds ? this.adIds.interstitialId : null;
        }
        getAppBoxId() {
            return this.adIds ? this.adIds.appBoxId : null;
        }
        getNativeAdId() {
            return this.adIds ? this.adIds.nativeAdId : null;
        }
        getCustomAdId() {
            return this.adIds ? this.adIds.customAdId : null;
        }
        initAdIds(e) {
            e && (!this._adIds && (this._adIds = {}), e.videoId && (this._adIds.videoId = e.videoId), 
            e.bannerId && (this._adIds.bannerId = e.bannerId), e.interstitialId && (this._adIds.interstitialId = e.interstitialId), 
            e.appBoxId && (this._adIds.appBoxId = e.appBoxId), e.nativeAdId && (this._adIds.nativeAdId = e.nativeAdId), 
            e.blockId && (this._adIds.blockId = e.blockId), e.customAdId && (this._adIds.customAdId = e.customAdId));
        }
        showGameClubButton(e) {
            this.loginInst.createGameClubButton({
                type: "image",
                style: {
                    left: 8,
                    top: .05 * e + 24,
                    width: 30,
                    height: 30
                },
                icon: "light"
            });
        }
        checkUpdate() {
            this.loginInst.checkUpdate();
        }
        loadSubpackage(e) {
            return this.loginInst.loadSubpackage(e);
        }
        exit() {
            this.loginInst.exit();
        }
        showModal(e, t ="Tips", s ="OK", n, i ="Cancel", r) {
            this.loginInst.showModal(e, t, s, n, i, r);
        }
        getSystemInfo() {
            return this.loginInst.getSystemInfo();
        }
        getMenuButtonBoundingClientRect() {
            return this.loginInst.getMenuButtonBoundingClientRect();
        }
        getLaunchOptionsSync() {
            return this.loginInst.getLaunchOptionsSync();
        }
        isServerEnable() {
            return this.loginInst.loginServerEnable();
        }
        onAudioInterruption(e, t) {
            this.loginInst.onAudioInterruption(e, t);
        }
        isAuth() {
            return this.loginInst.isAuth();
        }
        vibrate() {
            let e = fx.UserLogic.instance.getUserInfo(), t = !0;
            e && !1 === e.vibrateEnable && (t = !1), this.loginInst && t && this.loginInst.vibrateShort();
        }
        isConnectNetwork() {
            return this.loginInst.isConnectNetwork();
        }
        initAdv(e) {
            this.adInst && this.adInst.init(e);
        }
        getCode() {
            return this.loginInst.getCode();
        }
        getLoginCode() {
            return this.loginInst.getLoginCode();
        }
        getLoginAnonymousCode() {
            return this.loginInst.getLoginAnonymousCode();
        }
        saveAppToDesktop(e) {
            this.loginInst && this.loginInst.saveAppToDesktop(e);
        }
        showFavoriteGuide(e) {
            this.loginInst && this.loginInst.showFavoriteGuide(e);
        }
        FollowAwemeUser(e) {
            this.loginInst && this.loginInst.FollowAwemeUser(e);
        }
        getFollowAwemeState() {
            return this.loginInst ? this.loginInst.getFollowAwemeState() : e.FollowedState.NotGot;
        }
        getAddDeskState() {
            return this.loginInst ? this.loginInst.getAddDeskState() : e.AddDeskState.NotGot;
        }
        requestSubscribeMessage(e) {
            this.loginInst && this.loginInst.requestSubscribeMessage(e);
        }
        checkStageOnoff(e, t, s) {
            let n = fx.UserLogic.instance.getUserInfo();
            if (!n.stageId) return !1;
            if (s) {
                if (s.startDay && n.logindays < s.startDay) return console.log(`### checkStageOnoff userInfo.logindays<extra.startDay-${n.logindays}-${s.startDay}`), 
                !1;
                if (s.odd) {
                    s.odd > 1 && (s.odd = s.odd / 100);
                    let e = Math.random();
                    if (e > s.odd) return console.log(`### checkStageOnoff random>extra.odd-${e}-${s.odd}`), 
                    !1;
                }
            }
            return e ? n.stageId < e ? (console.log(`### checkStageOnoff userInfo.stageId<startLev-${n.stageId}-${e}`), 
            !1) : !t || 0 === t || 0 == (n.stageId - e) % (t + 1) || (console.log(`### checkStageOnoff 1!==(userInfo.stageId-startLev)%spaceLev-${n.stageId}-${e}-${t}-${(n.stageId - e - 1) % t}`), 
            !1) : (console.log(`### checkStageOnoff !startLev-${e}`), !1);
        }
        resourceNotEnoughProcess(e, t = !0) {
            t ? C.instance.showModal(e.msgboxContent, e.msgboxTitle, e.msgboxOkTxt, e.msgboxOkHandler, e.msgboxCancelTxt, e.msgboxCancelHandler) : e.msgboxOkHandler.run();
        }
        saveToServer(e) {
            1 === this._isLoginServer && A.instance.save(e);
        }
        isLoginServer() {
            return this._isLoginServer;
        }
        isFreeVideo() {
            if (this.loginInst) return this.loginInst.isFreeVideo();
        }
        getNickName() {
            if (this.loginInst) return this.loginInst.getNickName();
        }
        clipboardData(e) {
            if (this.loginInst) return this.loginInst.clipboardData(e);
        }
        showLoading(e, t, s) {
            this.loginInst.showLoading(e, t, s);
        }
        hideLoading(e) {
            this.loginInst.hideLoading(e);
        }
        request(e, t, s, n, i = "GET", r) {
            r ? this.loginInst.requestDecrypt(e, n, t, s, i) : this.loginInst.request(e, n, t, s, i);
        }
        getIpQuery() {
            return this.ipQueryRsp ? this.ipQueryRsp : (console.log("###=======================isHar:n get ip, repeat connect"), 
            A.instance.getIpQueryInfo(), null);
        }
        getCurPlayedTime() {
            return (new Date().getTime() - this.gameStartTime) / 1e3;
        }
        pay(e) {
            this.payInst && this.payInst.pay(e);
        }
    }
    Laya.ClassUtils.regClass("Adm", C);
    class m {
        static get inst() {
            return this._inst || (this._inst = new m()), this._inst;
        }
        gain(e) {
            e && e.gain();
        }
    }
    class R {
        constructor(e) {
            this.shareCount = 0, this.shareStartTime = void 0, this._shareParam = e;
        }
        gain() {
            fx.Utils.isOnMiniGame() ? (this.shareStartTime = fx.Utils.getTime(), this.shareCount += 1, 
            fx.EventCenter.instance.once(fx.BaseEvent.E_APP_ON_RESUME, this, t => {
                Math.floor((fx.Utils.getTime() - this.shareStartTime) / 1e3) > 3 ? fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_SUCCESS,
                    way: e.GetRewardSDKWay.SHARE,
                    rewardType: e.GetRewardSDKWay.SHARE
                }) : this.continue("分享给新的朋友才能获得奖励！"), this.shareStartTime = void 0;
            }), adm.Adm.instance.share(this._shareParam)) : fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                code: e.SdkCode.REWARD_GAIN_SUCCESS,
                way: e.GetRewardSDKWay.SHARE,
                rewardType: e.GetRewardSDKWay.SHARE
            });
        }
        continue(t) {
            adm.Adm.instance.showModal(t, "Tips", "Continue to share", Laya.Handler.create(this, () => {
                this.gain();
            }), "Come back later", Laya.Handler.create(this, () => {
                this.shareCount = 0, fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_FAIL
                });
            }));
        }
    }
    class y {
        constructor() {
            this._videoPath = "", this.recordData = {
                duration: 120,
                isEndlessMode: !1,
                isDisposeRecord: !1
            }, this.isStartRecord = !1, this.beforeRecordStageId = void 0, this.curRecordOdds = void 0, 
            this.isRecording = !1, this.init();
        }
        init() {
            fx.EventCenter.instance.on(n.E_SHARE_RESULT, this, t => {
                this.endlessModeAutoRecord(t.code == e.SdkCode.SHARE_SUCCESS), this.isStartRecord = !1, 
                t.code === e.SdkCode.SHARE_SUCCESS && (this._videoPath = null);
            });
            this.isStartRecord && fx.EventCenter.instance.event(n.E_SHARE_RESULT, {
                code: e.SdkCode.SHARE_FAILED
            });
        }
        recordVideo(e) {
            if (!this.isRecording) {
                if (this._videoPath = null, this.isRecording = !0, this.recordData = e, this.recordData.isEndlessMode || (this.recordData.isDisposeRecord = !1), 
                !this._recorder) {
                    if (this._recorder = wx.getGameRecorder(), !this._recorder.isFrameSupported()) return void console.log("不支持录制游戏画面~");
                    this._recorder.on("start", e => {
                        console.log("录屏开始 res:" + JSON.stringify(e)), this._videoPath = null, fx.EventCenter.instance.event(n.E_RECORD_VIDEO_START, this.recordData.duration);
                    }), this._recorder.on("stop", e => {
                        console.log("录屏结束 res.videoPath:" + JSON.stringify(e)), this._videoPath = e.videoPath, 
                        this.isRecording = !1, fx.EventCenter.instance.event(n.E_RECORD_VIDEO_END, this.recordData.isDisposeRecord);
                    }), this._recorder.on("pause", e => {
                        this._recorder && (fx.EventCenter.instance.event(n.E_RECORD_VIDEO_PAUSE), this._recorder.pause());
                    }), this._recorder.on("resume", e => {
                        this._recorder && (fx.EventCenter.instance.event(n.E_RECORD_VIDEO_RESUME), this._recorder.resume());
                    });
                }
                this._recorder.start({
                    duration: e.duration
                });
            }
        }
        stopRecord(e) {
            this._recorder && this.isRecording && (e && this.recordData && (this.recordData.isEndlessMode = !1, 
            this.recordData.isDisposeRecord = !1), this._recorder.stop());
        }
        shareVideo(e) {
            return e ? !(!this.autoRecord() || !this._videoPath) && (this.shareRecordVideo(), 
            !0) : (this.shareRecordVideo(), !0);
        }
        shareRecordVideo() {
            if (!this._videoPath) return void (this.recordData.isEndlessMode || fx.Utils.showTips("分享录屏失败，暂无录屏内容~"));
            this.isStartRecord = !0;
            let e = adm.Adm.instance.getSystemInfo(), t = adm.Adm.instance.getSystemInfo().SDKVersion, s = adm.Adm.instance.getSystemInfo().nativeSDKVersion, n = adm.Adm.instance.getServerJsonCfg(), i = n && n.shareCfg[fx.Utils.getIntRandom(0, n.shareCfg.length - 1)], r = null, a = null, o = null, d = null, l = null;
            r = n && i && i.name ? i.name : "微信小游戏", a = n && i && i.title ? i.title : "快来一起玩这个小游戏吧~", 
            l = n && i && i.cut_odds ? i.cut_odds : 50, o = n && i && i.templateId ? i.templateId : "";
            let h = n && i && i.cutTemplateId;
            d = h && h.length > 0 ? h[fx.Utils.getIntRandom(0, h.length - 1)] : "";
            let c = "", g = n && i && i.defaultBgm;
            g && (c = g[fx.Utils.getIntRandom(0, g.length - 1)]), "Douyin" !== e.appName ? (d = "", 
            c = "") : "ios" === e.platform ? (fx.Utils.compatibleVersion(t, "1.77.0") || (d = ""), 
            c = "") : "android" === e.platform && (fx.Utils.compatibleVersion(t, "1.74.0") || (d = ""), 
            fx.Utils.compatibleVersion(s, "5.9.0") || (c = "")), fx.Utils.getIntRandom(1, 100) > l && (d = "");
        }
        autoRecord() {
            if (!adm.Adm.instance.isHarvest()) return console.log("### autoRecord n sg!!!"), 
            !1;
            let e = adm.Adm.instance.getServerJsonCfg();
            return e ? (console.log(`### autoRecord ${e.record_StartLev}-${e.record_SpaceLev}-${e.record_Odds}-${e.record_AdditionOdds}`), 
            !1) : (console.log("### autoRecord 配置为空!!!"), !1);
        }
        canRecord() {
            return !1;
        }
        canShareRecord() {
            return null;
        }
        pauseRecord() {
            this._recorder && (this._recorder.on("pause", e => {
                console.log("录屏暂停"), fx.EventCenter.instance.event(n.E_RECORD_VIDEO_PAUSE);
            }), this._recorder.pause());
        }
        resumeRecord() {
            this._recorder && (this._recorder.on("resume", e => {
                console.log("录屏恢复"), fx.EventCenter.instance.event(n.E_RECORD_VIDEO_RESUME);
            }), this._recorder.resume());
        }
        destroyRecord() {}
        setShare(e, t, s, n) {
            
        }
        share(e, t, s) {
            let n = null, i = null, r = null, a = null;
            e instanceof E ? (n = e.title, i = e.imgUrl, r = e.queryParam, a = e.source) : (n = e, 
            i = t, r = s, a ="Unknown");
            let o = "";
            if (r) {
                fx.EventCenter.instance.once(fx.BaseEvent.E_APP_ON_RESUME, this, function(e) {
                    fx.Utils.showTips("感谢分享!!!");
                });
                for (let e in r) {
                    let t = r[e];
                    null != t && ("object" == typeof t && (t = JSON.stringify(t)), o = null == o ? e + "=" + t : o + "&" + e + "=" + t);
                }
            }
            if (console.log("wx share queryParam:" + JSON.stringify(r), o), wx.uma && wx.uma.shareAppMessage) {
                let e = {
                    title: n,
                    imageUrl: i,
                    query: o,
                    ald_desc: a
                };
                wx.uma.shareAppMessage(e), console.log("umaShareAppMessage: ", JSON.stringify(e));
            } else wx.shareAppMessage({
                title: n,
                imageUrl: i,
                query: o
            });
        }
        shareCustom(e, t, s, n, i) {
            if (wx.uma && wx.uma.shareAppMessage) {
                let t = {
                    title: e,
                    imageUrl: s,
                    query: n,
                    ald_desc: "Unknown"
                };
                wx.uma.shareAppMessage(t), console.log("umaShareAppMessage: ", JSON.stringify(t));
            } else wx.shareAppMessage({
                title: e,
                imageUrl: s,
                query: n
            });
        }
        endlessModeAutoRecord(e = !1) {
            this.recordData.isEndlessMode && Laya.timer.callLater(this, () => {
                this.recordVideo(this.recordData);
            });
        }
    }
    y.aldShareEnable = !1, Laya.ClassUtils.regClass("WXShare", y);
    class v {
        constructor() {
            this.banners = [], this.videos = [], this.curIsAutoPlayVideo = !1, this.interstitials = [], 
            this.customAds = [], this.gridAds = [];
        }
        getVideoById(e) {
            return this.videos.filter((t, s, n) => e === t.id)[0];
        }
        loadVideo(t, s = !1) {
            this.curIsAutoPlayVideo = s;
            let i = 0 === this.videos.length, r = this.getVideoById(t);
            r || (r = {
                id: t,
                inst: null,
                state: e.AdState.LOADING
            }, this.videos.push(r));
        }
        showVideo(t) {
            let s = this.getVideoById(t);
            s && s.inst && s.inst.show().then(() => {
                console.log("激励视频广告显示");
            }).catch(() => {
                s.inst.load().then(() => s.inst.show()).catch(t => {
                    s.state = e.AdState.LOAD_FAIL, console.log("激励视频广告显示失败");
                });
            });
        }
        preloadVideo(e) {
            this.loadVideo(e);
        }
        getVideoState(t) {
            let s = this.getVideoById(t);
            return s ? e.AdState.LOAD === s.state ? e.VideoState.ENABLED : e.VideoState.UNENABLED : e.VideoState.UNLOAD;
        }
        playVideo(t) {
            console.log("video Id", t);
            let s = this.getVideoById(t);
            s ? e.AdState.LOAD === s.state ? (Laya.MouseManager.enabled = !1, this.showVideo(t)) : e.AdState.LOAD_FAIL === s.state && (fx.Utils.showTips("暂无视频!!!"), 
            fx.EventCenter.instance.event(n.E_AD_VIDEO, {
                code: e.SdkCode.AD_VIDEO_LOAD_FAIL
            })) : (Laya.MouseManager.enabled = !1, this.loadVideo(t, !0)), Laya.MouseManager.enabled || Laya.timer.once(1e4, this, function() {
                !Laya.MouseManager.enabled && (Laya.MouseManager.enabled = !0);
            });
        }
        preloadBanner(t, s) {
            let i = this.getBannerById(t);
            if (i ? s || (s = i.customParams) : (!s && (s = {
                forever: !1,
                widthScaleRate: 1,
                adIntervals: 30
            }), !s.widthScaleRate && (s.widthScaleRate = 1), s.forever = Boolean(s && s.forever), 
            s && s.adIntervals && (s.adIntervals = s.adIntervals), i = {
                id: t,
                state: e.AdState.LOADING,
                inst: null,
                showCnt: 0,
                createStamp: fx.Utils.getTime(),
                customParams: s
            }, this.banners.push(i)), i.inst) e.AdState.DELETING !== i.state && e.AdState.LOAD_FAIL !== i.state || (i.inst.destroy(), 
            i.inst = null, i.showCnt = 0, i.state = e.AdState.LOADING, this.preloadBanner(t, s)); else {

            }
        }
        showBanner(t, s) {
            console.log("banner Id", t);
            let i = this.getBannerById(t);
            if (i) {
                if (i.customParams && i.customParams.forever) return;
                if (e.AdState.LOAD === i.state) {
                    if (s) {
                        let e = adm.Adm.instance.getSystemInfo();
                        s.top && (i.inst.style.top = s.top / Laya.stage.height * e.screenHeight), s.left && (i.inst.style.left = s.left / Laya.stage.width * e.screenWidth);
                    }
                    i.showCnt++, i.inst.show().then(() => {
                        fx.EventCenter.instance.event(n.E_AD_BANNER, {
                            code: e.SdkCode.AD_BANNER_SUCCESS
                        });
                    }).catch(t => {
                        fx.EventCenter.instance.event(n.E_AD_BANNER, {
                            code: e.SdkCode.AD_BANNER_FAIL
                        });
                    });
                } else e.AdState.LOAD_FAIL === i.state ? Laya.timer.once(1e4, this, () => {
                    this.preloadBanner(t);
                }) : e.AdState.LOADING === i.state && s && s.isPostLoadedShow && Laya.timer.once(500, this, () => {
                    this.showBanner(t, s);
                });
            } else this.preloadBanner(t, s);
        }
        hideBanner(t, s) {
            let n = this.getBannerById(t);
            n && (n.customParams && n.customParams.forever || (n.inst && n.inst.hide(), n.showCnt > 0 && s && (n.state = e.AdState.DELETING, 
            this.preloadBanner(t))));
        }
        getBannerById(e) {
            return this.banners.filter((t, s, n) => t.id === e, this)[0];
        }
        showInterstitial(t) {
            return;
        }
        getInterstitialById(e) {
            return this.interstitials.filter((t, s, n) => t.id === e, this)[0];
        }
        preloadInterstitial(t) {
            let s = this.getInterstitialById(t);
            s || (s = {
                id: t,
                state: e.AdState.LOADING,
                inst: null
            }, this.interstitials.push(s));
        }
        init(e) {}
        preloadNativeAd(e) {}
        showNativeAd(e, t) {}
        destoryNativeAd() {}
        reportAdClickNativeAd() {}
        getNativeAdData() {}
        getAppboxAdById(e) {
            return this.gridAds.filter((t, s, n) => e === t.id)[0];
        }
        preloadAppbox(e) {}
        showAppBox(e, t) {}
        hideAppBox(e, t) {}
        destoryAppBox() {}
        getAppBoxData() {
            return 1;
        }
        createAppBoxBtn(e, t) {}
        showAppBoxBtn() {}
        hideAppBoxBtn() {}
        destoryAppBoxBtn() {}
        showBlockAd(t, s) {
          
        }
        hideBlockAd(e, t) {
            let s = this.getCustomAdById(e);
            s && s.inst && (s.inst.hide(), t && (s.inst.destroy(), s.inst = null));
        }
        isBlockShowing(e) {
            let t = this.getCustomAdById(e);
            if (t && t.inst) return t.inst.isShow();
        }
        preloadBlock(t, s) {
            let i = this.getCustomAdById(t);
            if (i) s || (s = i.customParams); else {
                if (!s) return;
                i = {
                    id: t,
                    inst: null,
                    state: e.AdState.LOADING,
                    customParams: s
                }, this.customAds.push(i);
            }
            let r = adm.Adm.instance.getSystemInfo(), a = r.screenWidth * (s.style.left / Laya.stage.width), o = r.screenHeight * (s.style.top / Laya.stage.height), d = null;
            s.style && s.style.width && (d = r.screenWidth * (s.style.width / Laya.stage.width)), 
            i.inst ? e.AdState.DELETING !== i.state && e.AdState.LOAD_FAIL !== i.state || (i.inst.destroy(), 
            i.inst = null, i.state = e.AdState.LOADING, this.preloadBlock(t, s)) : (s.adIntervals = s.adIntervals ? s.adIntervals : 30, 
            i.inst = wx.createCustomAd({
                adUnitId: t,
                adIntervals: s.adIntervals,
                style: {
                    left: a,
                    top: o,
                    width: d
                }
            }), i.inst.onLoad(() => {
                console.log(`custom.id:${i.id} 广告加载成功`), i.state = e.AdState.LOAD, fx.EventCenter.instance.event(n.E_AD_NATIVE_CUSTOM, {
                    code: e.SdkCode.AD_NATIVE_CUSTOM_LOAD_SUCCESS,
                    adId: t
                }), i.customParams && i.customParams.forever && i.inst.show();
            }), i.inst.onError(s => {
                console.log(`custom.id:${i.id} 广告加载失败：` + JSON.stringify(s)), i.state = e.AdState.LOAD_FAIL, 
                fx.EventCenter.instance.event(n.E_AD_NATIVE_CUSTOM, {
                    code: e.SdkCode.AD_NATIVE_CUSTOM_LOAD_FAIL,
                    adId: t
                });
            }), i.inst.onClose(() => {
                console.log(`${i.id} 原生模板广告关闭`), fx.EventCenter.instance.event(n.E_AD_NATIVE_CUSTOM, {
                    code: e.SdkCode.AD_NATIVE_CUSTOM_CLOSE,
                    adId: t
                });
            }), i.inst.onHide(() => {
                console.log(`${i.id}  原生模板广告隐藏成功`), fx.EventCenter.instance.event(n.E_AD_NATIVE_CUSTOM, {
                    code: e.SdkCode.AD_NATIVE_CUSTOM_HIDE,
                    adId: t
                });
            }));
        }
        getCustomAdById(e) {
            return this.customAds.filter((t, s, n) => e === t.id)[0];
        }
        showCustomAd(e, t) {}
        hideCustomAd(e) {}
    }
    v.BannerRefreshTime = 4e4;
    class D {
        constructor() {}
        sendEvent(e, t) {
            
        }
        stageOnStart(e) {
            
        }
        stageOnRunning(e) {
            
        }
        stageOnEnd(e) {
            
        }
        unlockItem(e) {}
    }
    class T {
        constructor() {
            this.curRewardStrategyCnt = void 0, this.shareCount = 0, this.shareStartTime = void 0;
        }
        static get rewardStrategyCnt() {
            if (void 0 === this._rewardStrategyCnt) if (fx.UserLogic.instance.isNewDay && fx.UserLogic.instance.isNewDay()) this.rewardStrategyCnt = 0; else {
                let e = Laya.LocalStorage.getItem("rewardStrategyCnt");
                null == e || "" === e ? this.rewardStrategyCnt = 0 : this._rewardStrategyCnt = Number(e);
            }
            return this._rewardStrategyCnt;
        }
        static set rewardStrategyCnt(e) {
            this._rewardStrategyCnt !== e && (this._rewardStrategyCnt = e, Laya.LocalStorage.setItem("rewardStrategyCnt", this._rewardStrategyCnt.toString()));
        }
        setCurStrategy(e, t) {
            this.curStrategy = e, this.curParams = t, e && t && (T.rewardStrategyCnt++, this.curRewardStrategyCnt = T.rewardStrategyCnt);
        }
        getStrategy() {
            if (e.GetRewardSDKWay.AUTO === this.curStrategy) {
                if (e.VideoState.ENABLED === adm.Adm.instance.isHasVideo(this.curParams.id)) {
                    let t = adm.Adm.instance.getServerJsonCfgShareParams().OlderShareCtnBase;
                    fx.UserLogic.instance.isFirstLogin && fx.UserLogic.instance.isFirstLogin() && (t = adm.Adm.instance.getServerJsonCfgShareParams().FreshShareCntBase), 
                    t || (t = 0);
                    let s = null;
                    if (0 !== t && this.curRewardStrategyCnt <= t) s = e.GetRewardSDKWay.SHARE; else {
                        let n = adm.Adm.instance.getServerJsonCfgShareParams().ShareSpace;
                        n || (n = 0), s = n > 0 && 0 == (this.curRewardStrategyCnt - t) % (n + 1) ? e.GetRewardSDKWay.SHARE : e.GetRewardSDKWay.VIDEO;
                    }
                    return s;
                }
                return e.GetRewardSDKWay.SHARE;
            }
            return e.GetRewardSDKWay.SHARE === this.curStrategy ? this.curStrategy : e.GetRewardSDKWay.VIDEO;
        }
        runStrategy() {
            let t = this.getStrategy();
            adm.Adm.instance.isFreeVideo() ? fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                code: e.SdkCode.REWARD_GAIN_SUCCESS,
                way: e.GetRewardSDKWay.VIDEO,
                gid: this.curParams.bindCtrlGId
            }) : e.GetRewardSDKWay.SHARE === t ? (adm.Adm.instance.sendEvent("share", {
                "Start": this.curParams.source
            }), this.share(this.curParams)) : e.GetRewardSDKWay.VIDEO === t && (adm.Adm.instance.sendEvent("视频", {
                "Start": this.curParams.source
            }), this.playVideo(this.curParams));
        }
        playVideo(t) {
            YYGGames.showReward(()=>{
                // var s = fx.SoundManager.instance.getToggleMusicStatus();
                // let i = adm.Adm.instance.isHasVideo(this.curParams.id);
                this.curParams && this.curParams.forever && (
                    T.rewardStrategyCnt++, 
                    this.curRewardStrategyCnt++, 
                    T.rewardStrategyCnt++
                ), 
                fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_SUCCESS,
                    way: e.GetRewardSDKWay.VIDEO,
                    gid: t.bindCtrlGId
                }), 
                adm.Adm.instance.sendEvent("视频", {
                    "完成": t.source
                });
                // s && fx.SoundManager.instance.toggleAll();
            });
            // e.VideoState.UNENABLED === i ? adm.Adm.instance.isAudit() ? (fx.Utils.showTips("今天已经没有视频啦~"), 
            // fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
            //     code: e.SdkCode.REWARD_GAIN_FAIL,
            //     gid: t.bindCtrlGId
            // })) : (fx.Utils.showTips("今天已经没有视频啦, 分享也可获得奖励哟!"), Laya.MouseManager.enabled = !1, 
            // Laya.timer.once(1e3, this, () => {
            //     Laya.MouseManager.enabled = !0, this.share(t);
            // })) : (fx.EventCenter.instance.once(n.E_AD_VIDEO, this, i => {
            //     e.SdkCode.AD_VIDEO_SUCCESS === i.code ? (this.curParams && this.curParams.forever && (T.rewardStrategyCnt++, 
            //     this.curRewardStrategyCnt++, T.rewardStrategyCnt++), fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
            //         code: e.SdkCode.REWARD_GAIN_SUCCESS,
            //         way: e.GetRewardSDKWay.VIDEO,
            //         gid: t.bindCtrlGId
            //     }), adm.Adm.instance.sendEvent("视频", {
            //         "完成": t.source
            //     }), s && fx.SoundManager.instance.toggleAll()) : e.SdkCode.AD_VIDEO_UNCOMPLETE === i.code ? (adm.Adm.instance.showModal("看完视频才会有奖励哟！！！", "提示", "继续观看", Laya.Handler.create(this, () => {
            //         s && fx.SoundManager.instance.toggleAll(), this.playVideo(t);
            //     }), "一会再来", Laya.Handler.create(this, function() {
            //         fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
            //             code: e.SdkCode.REWARD_GAIN_FAIL,
            //             gid: t.bindCtrlGId
            //         }), s && fx.SoundManager.instance.toggleAll();
            //     })), adm.Adm.instance.sendEvent("视频", {
            //         "未完成": t.source
            //     })) : e.SdkCode.AD_VIDEO_LOAD_FAIL === i.code && (fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
            //         code: e.SdkCode.REWARD_GAIN_FAIL,
            //         gid: t.bindCtrlGId
            //     }), s && fx.SoundManager.instance.toggleAll());
            // }), adm.Adm.instance.playVideo(t.id), s && fx.SoundManager.instance.toggleAll());
        }
        share(t) {
            this.shareStartTime = fx.Utils.getTime(), fx.EventCenter.instance.once(fx.BaseEvent.E_APP_ON_RESUME, this, s => {
                if (Math.floor((fx.Utils.getTime() - this.shareStartTime) / 1e3) > 3) {
                    this.shareCount += 1;
                    let s = !1;
                    if (this.shareCount > 1) s = !0; else {
                        let e = adm.Adm.instance.getServerJsonCfgShareParams().shareFailProb;
                        e || (e = 0), fx.Utils.getIntRandom(0, 100) >= e && (s = !0);
                    }
                    s ? (this.shareCount = 0, this.curParams && this.curParams.forever && (T.rewardStrategyCnt++, 
                    this.curRewardStrategyCnt++, T.rewardStrategyCnt++), fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                        code: e.SdkCode.REWARD_GAIN_SUCCESS,
                        way: e.GetRewardSDKWay.SHARE,
                        gid: t.bindCtrlGId
                    }), adm.Adm.instance.sendEvent("share", {
                        "Done": t.source
                    })) : this.continueShare(t, "不要频繁骚扰同一个群!");
                } else this.continueShare(t, "Sharing failed!"), adm.Adm.instance.sendEvent("share", {
                    "incomplete": t.source
                });
                this.shareStartTime = void 0;
            }), adm.Adm.instance.share(t);
        }
        continueShare(t, s) {
            adm.Adm.instance.showModal(s, "Tips", "Continue to share", Laya.Handler.create(this, () => {
                this.share(t);
            }), "Come back later", Laya.Handler.create(this, () => {
                this.shareCount = 0, fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_FAIL,
                    gid: t.bindCtrlGId
                });
            }));
        }
    }
    T._rewardStrategyCnt = void 0;
    class O {
        constructor() {}
        pay(e) {
            wx.requestMidasPayment({
                mode: "game",
                env: e.env ? e.env : 0,
                offerId: e.offerId,
                currencyType: "CNY",
                platform: e.platform ? e.platform : "android",
                buyQuantity: e.buyQuantity,
                zoneId: "1"
            });
        }
    }
    class N extends fx.BaseEventDispatcher {
        constructor() {
            super(), this.isUser = !1, this._nickName = void 0, this._freeVideo = !1;
        }
        set loginCode(e) {
            if (this._loginCode = e, !this.openId && fx.HttpServer.I.isLogin()) {
                fx.EventCenter.instance.once(f.E_WHITELIST_RESULT, this, e => {
                    e && (this.freeVideo = e.isInWriteList);
                });
                let e = fx.HttpServer.I.getOpenId();
                this.openId = e, A.instance.getVideoWhiteList(e);
            }
        }
        get loginCode() {
            return this._loginCode;
        }
        initMiniAdapter() {}
        engineInitialized() {}
        getMiniAdapter() {
            return Laya.MiniAdpter;
        }
        login() {
            this.wxloginSucc.bind(this),
            this.onSettings.bind(this);
            this.networkstate = "none",
            this.networkstate = e.networkType;
        }
        checkSession(e) {
            e.runWith(!0);
        }
        request(e, t, s, n, i) {
            console.error(e);
            // console.log(">>>>>>>>>>>>>>>>> request: ", e, t), wx.request({
            //     url: e,
            //     data: t,
            //     method: i,
            //     dataType: "json",
            //     success: e => {
            //         console.log("<<<<<<<<<<<<<<<<< request: ", e), s && s.runWith(e.data);
            //     },
            //     fail: e => {
            //         console.log("<<<<<<<<<<<<<<<<< request error: ", e), console.log("获取服务器JSON配置失败！"), 
            //         n && n.run();
            //     }
            // });
            Laya.loader.load(e,  Laya.Handler.create(this, function(data){
             
                // console.error(JSON.parse(data));
                s && s.runWith(data);
            }),null,Laya.Loader.JSON,);



        }
        requestDecrypt(e, t, s, n, i) {

            // console.log(">>>>>>>>>>>>>>>>> request: ", e, t), wx.request({
            //     url: e,
            //     data: t,
            //     method: i,
            //     responseType: "arraybuffer",
            //     success: e => {
            //         if (console.log("<<<<<<<<<<<<<<<<< request: ", e), s) {
            //             let t = window.pako.inflate(e.data, {
            //                 to: "string"
            //             });
            //             s.runWith(JSON.parse(t));
            //         }
            //     },
            //     fail: e => {
            //         console.log("<<<<<<<<<<<<<<<<< request error: ", e), console.log("获取服务器JSON配置失败！"), 
            //         n && n.run();
            //     }
            // });


            console.error(e);
            Laya.loader.load(e,  Laya.Handler.create(this, function(e){
                let t = window.pako.inflate(e.data, {
                    to: "string"
                });
                console.error(JSON.parse(t));
                s.runWith(JSON.parse(t));
            }),null,Laya.Loader.BUFFER,);
        }
        getShareInstance() {
            return new y();
        }
        getAdvInstance() {
            return new v();
        }
        getStatInstance() {
            return new D();
        }
        getRewardStrInstance() {
            return new T();
        }
        getPayInstance() {
            return new O();
        }
        onSettings(t) {
            let s = t.authSetting;
            this.isUserInfoAuth = !!s["scope.userInfo"], this.isUserInfoAuth, this.code && this.event(n.E_SDK_LOGIN, {
                code: e.SdkCode.WX_LOGIN_SUCCESS,
                msg: "微信登录成功"
            });
        }
        isAuth() {
            return this.isUserInfoAuth;
        }
        loginServerEnable() {
            return "" != adm.Adm.GameCfg.server_url;
        }
        getQuery() {
            return this.query;
        }
        getEncryptedData() {
            return [ this.encryptedData, this.iv ];
        }
        auth(e) {
            this.profileBtn = e, this.profileToServer = this.loginServerEnable(), this.createUserInfoButton();
        }
        onResume(e) {
            e.query && !fx.Utils.isEmpty(e.query) && this.loginServerEnable() && (this.query = e.query, 
            A.instance.postShareQuery(e.query));
        }
        wxloginSucc(t) {
            console.log("微信登录成功！"), this.code = t.code, this.loginCode = t.code;
            let s = 10;
            const checkNeedFix = () => !this.menuInfo || this.menuInfo.top > 0 || s <= 0 ? (this.loginServerEnable() && A.instance.login(this.code, i.query), 
            void 0 !== this.isUserInfoAuth && this.event(n.E_SDK_LOGIN, {
                code: e.SdkCode.WX_LOGIN_SUCCESS,
                msg: "微信登录成功"
            }), !1) : (s--, !0), fixInfo = () => {
                this.getSystemInfo(!0), this.getMenuButtonBoundingClientRect(!0), checkNeedFix() || (fx.Utils.sNotchScreen = void 0, 
                Laya.timer.clear(this, fixInfo));
            };
            let i = wx.getLaunchOptionsSync();
            this.query = i.query, checkNeedFix() && Laya.timer.loop(100, this, fixInfo);
        }
        wxloginFail() {
            console.log("微信登录失败！"), this.event(n.E_SDK_LOGIN, {
                code: e.SdkCode.WX_LOGIN_FAILED,
                msg: "微信登录失败"
            });
        }
        userInfoSucc(t) {
            let s, i = fx.UserLogic.instance.getMine();
            t.userInfo ? (console.log("获取用户信息成功！" + JSON.stringify(t)), this.isUserInfoAuth = !0, 
            this.encryptedData = t.encryptedData, this.iv = t.iv, this.destroyUserInfoButton(), 
            s = new e.SDKEntity.UserInfoEntity(), function(e, t) {
                null != e.nickName && (t.name = e.nickName), null != e.avatarUrl && (t.headUrl = e.avatarUrl), 
                null != e.gender && (t.sex = e.gender), null != e.city && (t.city = e.city), null != e.province && (t.province = e.province), 
                null != e.country && (t.country = e.country), null != e.language && (t.language = e.language);
            }(t.userInfo, s), fx.UserLogic.instance.update(s), fx.UserLogic.instance.save("name", s.name), 
            t.userInfo.nickName && (i.name = this.nickName = t.userInfo.nickName)) : console.log("获取用户信息失败！"), 
            this.nickName || (i.name = this.nickName ="游客" + fx.Utils.getIntRandom(1, 199999)), 
            this.event(n.E_USER_INFO, {
                code: 0,
                info: t.userInfo,
                nickName: this.nickName
            }), this.profileToServer && A.instance.postProfile(s);
        }
        userInfoFail(t) {
            console.log("===========:", t);
            let s = fx.UserLogic.instance.getMine();
            if (s && s.name && (this.nickName = s.name), !this.nickName) {
                let t = new e.SDKEntity.UserInfoEntity();
                t.name = s.name = this.nickName ="游客" + fx.Utils.getIntRandom(1, 199999), fx.UserLogic.instance.update(t);
            }
            this.event(n.E_USER_INFO, {
                code: -1,
                nickName: this.nickName
            });
        }
        createUserInfoButton() {
            let e = this.profileBtn, t = e.localToGlobal(new Laya.Point(0, 0)), s = e.localToGlobal(new Laya.Point(e.width, e.height));
            Laya.stage.transform.transformPoint(t), Laya.stage.transform.transformPoint(s);
            let n = s.x - t.x, i = s.y - t.y, r = wx.createUserInfoButton({
                type: "text",
                text: "",
                style: {
                    left: t.x,
                    top: t.y,
                    width: n,
                    height: i
                },
                withCredentials: !0,
                lang: "zh_CN"
            });
            r.show(), r.onTap(this.userInfoSucc.bind(this)), this.profileBtn = r, e.once(Laya.Event.REMOVED, this, this.destroyUserInfoButton);
        }
        destroyUserInfoButton() {
            this.profileBtn && this.profileBtn.destroy(), this.profileBtn = null;
        }
        setKeepScreenOn(e) {
           
        }
        onShow(e) {
            
        }
        onHide(e) {
            
        }
        checkUpdate() {
            
        }
        loadSubpackage(e) {
            return true;
        }
        showModal(e, t ="Tips", s ="OK", n, i ="Cancel", r) {
            e.confirm ? n && n.run() : i && r && r.run();
        }
        getSystemInfo(e) {
            return null;
        }
        getMenuButtonBoundingClientRect(e) {
            return !e && this.menuInfo || fx.Utils.compareVersion(this.systemInfo.SDKVersion, "2.1.0") >= 0 && (this.menuInfo = wx.getMenuButtonBoundingClientRect(), 
            console.log("getMenuButtonBoundingClientRect: " + JSON.stringify(this.menuInfo))), 
            this.menuInfo;
        }
        exit() {
            wx.exitMiniProgram({});
        }
        getLaunchOptionsSync() {
            return wx.getLaunchOptionsSync();
        }
        navigateToMiniProgram(e) {
            wx.navigateToMiniProgram(e);
        }
        getOpenDataContext() {
            return wx.getOpenDataContext();
        }
        createFeedbackButton(e) {
            return wx.createFeedbackButton(e);
        }
        openCustomerServiceConversation(e) {
            wx.openCustomerServiceConversation(e);
        }
        createGameClubButton(e) {
            wx.createGameClubButton(e);
        }
        onAudioInterruption(e, t) {

        }
        vibrateShort() {
            wx.vibrateShort({});
        }
        getNetworkType() {
            return this.networkstate;
        }
        isConnectNetwork() {
            return console.log("networkstate: ", this.networkstate), "none" !== this.networkstate;
        }
        judgeBAndW(t) {
            let s = t.sceneId;
            if (!s) return e.BlackAndWhite.Black;
            let n = Laya.LocalStorage.getItem("BAndW");
            return n || (n = 1095 === s || 1037 === s || 1046 === s ? "white" : "black", Laya.LocalStorage.setItem("BAndW", n)), 
            n === e.BlackAndWhite.White ? e.BlackAndWhite.White : e.BlackAndWhite.Black;
        }
        getCode() {
            if (this.code) return this.code;
        }
        saveAppToDesktop(e) {}
        showFavoriteGuide(e) {}
        FollowAwemeUser(e) {}
        getFollowAwemeState() {
            return e.FollowedState.NotGot;
        }
        getAddDeskState() {
            return e.AddDeskState.NotGot;
        }
        requestSubscribeMessage(e) {
            wx.requestSubscribeMessage(e);
        }
        getNickName() {
            let e = fx.UserLogic.instance.getMine();
            if (e && e.name) return this.nickName = e.name, void this.event(n.E_USER_INFO, {
                code: 0,
                nickName: this.nickName
            });
            this.nickName || this.isUser || (this.isUser = !0, wx.getUserProfile ? wx.getUserProfile({
                desc: "用于显示聊天名字",
                success: this.userInfoSucc.bind(this),
                fail: this.userInfoFail.bind(this)
            }) : this.userInfoFail(null));
        }
        get nickName() {
            return this._nickName;
        }
        set nickName(e) {
            this._nickName = e;
        }
        isFreeVideo() {
            if (!this.openId && fx.HttpServer.I.isLogin()) {
                fx.EventCenter.instance.once(f.E_WHITELIST_RESULT, this, e => {
                    e && (this.freeVideo = e.isInWriteList);
                });
                let e = fx.HttpServer.I.getOpenId();
                this.openId = e, A.instance.getVideoWhiteList(e);
            }
            return this.freeVideo;
        }
        get freeVideo() {
            return this._freeVideo;
        }
        set freeVideo(e) {
            this._freeVideo = e;
        }
        clipboardData(e) {
            wx.setClipboardData({
                data: e,
                success(e) {
                    console.log("复制成功~");
                }
            });
        }
        showLoading(e, t, s) {
            wx.showLoading({
                title: e || "Loading...",
                mask: t || !1,
                success: s && s.success,
                fail: s && s.fail
            });
        }
        hideLoading(e) {
            wx.hideLoading({
                success: e && e.success,
                fail: e && e.fail
            });
        }
        getLoginCode() {
            return this.code;
        }
        getLoginAnonymousCode() {
            return this.code;
        }
    }
    Laya.ClassUtils.regClass(t.WEIXIN, N);
    function __awaiter(e, t, s, n) {
        return new (s || (s = Promise))(function(i, r) {
            function fulfilled(e) {
                try {
                    step(n.next(e));
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    r(e);
                }
            }
            function rejected(e) {
                try {
                    step(n.throw(e));
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    r(e);
                }
            }
            function step(e) {
                var t;
                e.done ? i(e.value) : (t = e.value, t instanceof s ? t : new s(function(e) {
                    e(t);
                })).then(fulfilled, rejected);
            }
            step((n = n.apply(e, t || [])).next());
        });
    }
    Object.create;
    Object.create;
    class L {}
    L.sdkVersion = "1.0.0", 
    L.sdkBuildTimeStamp = "20224717747", 
    L.storagePrefix = "xjingsdk_", 
    L.server_login = "", 
    L.server_report = "", 
    L.server_res = "", 
    L.isInit = !1, 
    L.totalCount = 0, 
    L.gapCount = 0, 
    L.lastAddUpDate = "", 
    L.totalKey = "xjing_ol_time_total", 
    L.gapKey = "xjing_ol_time_count", 
    L.lastAddUpDataKey = "xjing_ol_last_add_up_date", 
    L.sharePicDataKey = "xjing_share_pic_data";
    class w {
        static openDebugMode(e) {
            this.isDebug = e;
        }
        static log(...e) {
            this.isDebug && console.log("xjingsdk==>", ...e);
        }
        static parseUserChannel(e) {
            let t = {
                channelType: "",
                channelId: ""
            };
            return "partake" == e.query.t ? (t.channelType = e.query.t, t.channelId = e.query.sid) : e.query.t ? (t.channelType = e.query.t, 
            t.channelId = e.query.a) : (t.channelType = "oth", t.channelId = e.scene), t;
        }
        static getHttpQueryValueByKey(e, t) {
            try {
                let s = e.match(new RegExp("(\\?|&)" + t + "=([^&]*)(&|$)"));
                if (s) return s[2];
            } catch (e) {}
            return "";
        }
        static buildHttpQuery(e) {
            let t = "";
            for (let s in e) t += s + "=" + e[s] + "&";
            return t.substr(0, t.length - 1);
        }
        static roundTableSort(e, t, s = !0) {
            if (!e || !e.length) return [];
            let n = [], i = [], r = 0;
            for (let s = 0; s < e.length; s++) isNaN(e[s][t]) || (e[s][t] = Number(e[s][t]), 
            e[s][t] <= this.thresholdLow || (e[s][t] >= this.thresholdUp ? n.push(e[s]) : (i.push(e[s]), 
            r += e[s][t])));
            if (!r || !i.length) return n;
            let a = [];
            for (;i.length; ) {
                let e = Math.random(), s = 0;
                for (let n = 0; n < i.length; n++) {
                    let o = s + i[n][t] / r;
                    if (e >= s && e < o) {
                        a.push(i[n]), r -= i[n][t], i.splice(n, 1);
                        break;
                    }
                    s = o;
                }
            }
            let o = n.concat(a);
            return s ? o[0] : o;
        }
        static getFormatNowDate() {
            let e = new Date(), t = e.getMonth() + 1, s = e.getDate();
            return t <= 9 && (t = "0" + t), s <= 9 && (s = "0" + s), e.getFullYear() + "-" + t + "-" + s;
        }
        static resetTotalCount(e) {
            let t = this.getFormatNowDate();
            e != t && (L.lastAddUpDate = t, L.totalCount = 0, L.gapCount = 0, b.instance.putStorage(L.totalKey, 0, !1), 
            b.instance.putStorage(L.gapKey, 0, !1));
        }
        static compareVersionTx(e, t) {
            e = e.split("."), t = t.split(".");
            for (var s = Math.max(e.length, t.length); e.length < s; ) e.push("0");
            for (;t.length < s; ) t.push("0");
            for (var n = 0; n < s; n++) {
                var i = parseInt(e[n]), r = parseInt(t[n]);
                if (i > r) return 1;
                if (i < r) return -1;
            }
            return 0;
        }
        static paraseChannelUserId(e) {
            return e && e.query && e.query.userid ? e.query.uid : "";
        }
        static addRes2MemoryCache(e) {
            null != this.mCacheDataList && null != this.mCacheDataList && -1 == this.mCacheDataList.indexOf(e) && this.mCacheDataList.push(e);
        }
        static getResFromMemoryCache(e) {
            if (null == this.mCacheDataList || null == this.mCacheDataList) return "";
            e = e.replace("https://", "");
            let t = this.mCacheDataList.length;
            for (let s = 0; s < t; s++) {
                let t = this.mCacheDataList[s];
                if (-1 != t.indexOf(e)) return t;
            }
            return "";
        }
        static isAbroadCity(e) {
            const t = e.province, s = e.city, n = e.country;
            return n && -1 == n.indexOf("中国") || t && -1 != t.indexOf("台湾") || s && -1 != s.indexOf("台湾") || t && -1 != t.indexOf("香港") || s && -1 != s.indexOf("香港") || t && -1 != t.indexOf("澳门") || s && -1 != s.indexOf("澳门");
        }
    }
    w.isDebug = !1, w.thresholdUp = Number.MAX_VALUE, w.thresholdLow = 0, w.mCacheDataList = [];
    class U {
        findStorageByKey(e) {
            try {
                let t = window.localStorage.getItem(L.storagePrefix + e);
                return t ? JSON.parse(t) : "";
            } catch (e) {
                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                return "";
            }
        }
        putStorage(e, t) {
            window.localStorage.setItem(L.storagePrefix + e, JSON.stringify(t));
        }
        httpRequest(e, t, s = "get", n = 2) {
            let i = "";
            if (t) {
                for (let e in t) i += e + "=" + t[e] + "&";
                i && (i = i.substr(0, i.length - 1), "get" == s && (e += -1 == e.indexOf("?") ? "?" : "&", 
                e += i));
            }
            return new Promise((t, n) => {
                let r = new XMLHttpRequest();
                r.onreadystatechange = function() {
                    if (4 == r.readyState) if (200 == r.status) try {
                        t(JSON.parse(r.responseText));
                    } catch (e) {
                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                        t(r.responseText);
                    } else n("HTTP request fail，status =" + r.status);
                }, "get" == s ? (r.open("GET", e), r.send()) : (r.open("POST", e), r.send(i));
            });
        }
        getUser(e) {
            return __awaiter(this, void 0, void 0, function*() {
                return {
                    openid: "debug-user-openid"
                };
            });
        }
        getUserInfo() {
            return __awaiter(this, void 0, void 0, function*() {
                return {
                    nickName: "debug-nick-name",
                    avatarUrl: "",
                    gender: -1
                };
            });
        }
        getSystemInfo() {
            return {
                platform: navigator.platform,
                model: ""
            };
        }
        getEnterOptions() {
            return {
                scene: 0,
                query: {}
            };
        }
        navigateTo(e) {
            return __awaiter(this, void 0, void 0, function*() {});
        }
        navigateToSync(e, t) {
            return __awaiter(this, void 0, void 0, function*() {});
        }
        getShareObject(e) {}
        getLocalCacheResUrl(e, t = !1) {
            return Promise.resolve(e);
        }
        setTimeout(e, t) {
            return setTimeout(e, t);
        }
        setInterval(e, t) {
            return setInterval(e, t);
        }
        clearTimeout(e) {
            clearTimeout(e);
        }
        clearInterval(e) {
            clearInterval(e);
        }
        preHandleInit() {}
    }
    class k {
        static setUser(e) {
            return e.openid ? (e.unionid || (e.unionid = ""), '"null"' != e.unionid && "null" != e.unionid || (e.unionid = ""), 
            e.channel_openid || (e.channel_openid = ""), '"null"' != e.channel_openid && "null" != e.channel_openid || (e.channel_openid = ""), 
            b.instance.putStorage("xjing_user_data", e), w.log("set user data success. openid = ", e.openid), 
            !0) : (w.log("set user data fail，openid is null. user =", e), !1);
        }
        static getUser() {
            let e = b.instance.findStorageByKey("xjing_user_data");
            return e && e.openid ? (e.unionid = e.unionid || "", e) : {
                openid: "",
                unionid: "",
                last_login_time: 0,
                create_time: 0
            };
        }
        static getUserAsyn() {
            return __awaiter(this, void 0, void 0, function*() {
                return new Promise((e, t) => {
                    if (this.getUser().openid) return void e(this.getUser());
                    let s = b.instance.setInterval(() => {
                        this.getUser().openid && (b.instance.clearInterval(s), b.instance.clearTimeout(n), 
                        e(this.getUser()));
                    }, 150), n = b.instance.setTimeout(() => {
                        b.instance.clearInterval(s);
                    }, 2e4);
                });
            });
        }
        static thirdLogin(e) {
            return new Promise((t, s) => {
                let n = w.parseUserChannel(L.enterOptions);
                if (e && (e.channel_type = n.channelType ? n.channelType : "", e.channel_id = n.channelId ? n.channelId : ""), 
                this.setUser(e)) {
                    let n = e.openid, i = e.unionid, r = e.channel_type, a = e.channel_id, o = {
                        product_id: L.pid,
                        openid: n,
                        unionid: i,
                        channel_type: r,
                        chennal_id: a
                    };
                    b.instance.httpRequest(L.server_login + "/server/otherLogin.do", o, "post").then(e => {
                        e && 200 == e.code && e.result && e.result.openid ? (w.log("third login success. ", e), 
                        k.setUser(e.result), t(e.result)) : (w.log("third login fail, openid is null. ", e), 
                        s());
                    }).catch(e => {
                        w.log("third login error, " + e), s();
                    });
                } else w.log("init with third user fail. openid is null."), s();
            });
        }
        static getOpenId() {
            return k.getUser().openid;
        }
        static isAdUser() {
            let e = this.getUser();
            if (!e || !e.openid) return !1;
            if (e.channel_type && "ad" == e.channel_type) return !0;
            if (e.channel_type && "oth" == e.channel_type) {
                let t = [ 1095, 1084, 1045, 1046, 1067, 1065 ], s = e.channel_id ? Number(e.channel_id) : 0;
                if (!(-1 == t.indexOf(s))) return !0;
            }
            return !1;
        }
    }
    class x {
        static getGameConfig(e) {
            return new Promise((t, s) => {
                if (!(e = e || L.pid)) return w.log("fetch game config fail. pid is null.）"), void t(null);
                if (!this.gameConfigPromise) {
                    let t = L.server_login + "/conf/pull.do?product_id=" + e;
                    this.gameConfigPromise = b.instance.httpRequest(t);
                }
                this.gameConfigPromise.then(e => {
                    200 == e.code && e.result && "object" == typeof e.result ? (w.log("fetch game config success. res=", e.result), 
                    t(e.result)) : (w.log("fetch game config fail. res=", e), t(null));
                }).catch(e => {
                    w.log("fetch game config error.", e), t(null);
                });
            });
        }
        static getGameVerContrLevel(e, t) {
            return new Promise((s, n) => {
                L.appCodeVersion = e || "", t = t || L.pid;
                let i = {
                    check: 1
                };
                if (t) {
                    if (!this.gameVerContrPromise) {
                        let s = L.server_login + "/server/shield.do?product_id=" + t + "&ver=" + e;
                        this.gameVerContrPromise = b.instance.httpRequest(s);
                    }
                    this.gameVerContrPromise.then(t => {
                        200 == t.code && t.result && "object" == typeof t.result ? (w.log("fetch game version controller level success. res=", t.result), 
                        i = t.result, s(t.result)) : (w.log("fetch game version controller level fail. res=", t), 
                        s({
                            check: 1
                        })), e && (this.gameVerContrData = i);
                    }).catch(t => {
                        w.log("fetch game version controller level error.", t), s(i), e && (this.gameVerContrData = i);
                    });
                } else w.log("fetch game version controller level fail. pid is null."), s(i), e && (this.gameVerContrData = i);
            });
        }
        static checkFission() {
            let e = [ 1031, 1032, 1042, 1011, 1012, 1013, 1017, 1047, 1049, 1053, 1054, 1084, 1106, 2001, 2970, 1e3, 1005, 1006, 1025, 1027, 1030 ];
            return !!this.checkCurrentScene(e) && this.checkHistoryScene(e);
        }
        static checkHistoryScene(e) {
            let t = k.getUser().channel_id ? Number(k.getUser().channel_id) : 0;
            if (1048 == t) return w.log("check history scene , fission1=false , history scene = " + t), 
            !1;
            let s = -1 == e.indexOf(t);
            return w.log("check history scene , fission2=", s, ", history scene = " + t), s;
        }
        static checkCurrentScene(e) {
            if (L.enterOptions && "1037" == L.enterOptions.scene && L.enterOptions.referrerInfo && "wxcff7381e631cf54e" == L.enterOptions.referrerInfo.appId) return w.log("check current scene , fission1=false"), 
            !1;
            if (L.enterOptions && 1048 == L.enterOptions.scene && (!L.enterOptions.query || !L.enterOptions.query.type)) return w.log("check current scene , fission2=false , current scene = " + L.enterOptions.scene), 
            !1;
            return !(-1 != e.indexOf(L.enterOptions.scene)) || (w.log("check current scene , fission3=false , current scene = " + L.enterOptions.scene), 
            !1);
        }
    }
    class P {
        static customEvent(e = 0, t = "", s = "") {
            L.isInit && k.getUserAsyn().then(n => {
                let i = {
                    product_id: L.pid,
                    openid: n.openid,
                    event_id: e,
                    custom_param_1: encodeURIComponent(t),
                    custom_param_2: encodeURIComponent(s)
                };
                b.instance.httpRequest(L.server_report + "/log/event.do", i, "post").then(t => {
                    w.log("custom event report success. eventid:" + e);
                });
            }).catch(t => {
                w.log("custom event report fail. eventid:" + e + ", err@" + t);
            });
        }
        static partakeIntoEvent(e, t, s, n = "", i = "") {
            L.isInit && k.getUserAsyn().then(r => {
                let a = r.openid, o = {
                    product_id: L.pid,
                    openid: a,
                    from_id: e,
                    from_type: s ? 1 : 0,
                    from_userid: t,
                    custom_param_1: n,
                    custom_param_2: i
                };
                b.instance.httpRequest(L.server_report + "/log/partakeInto.do", o, "post").then(t => {
                    w.log("report partakeInto event success. partakeId=" + e);
                });
            }).catch(() => {
                w.log("report partakeInto event fail. partakeId=" + e);
            });
        }
        static adIntoEvent(e, t, s = "") {
            L.isInit && k.getUserAsyn().then(s => {
                let n = s.openid, i = {
                    product_id: L.pid,
                    openid: n,
                    custom_ad_id: e,
                    from_appid: t
                };
                b.instance.httpRequest(L.server_report + "/log/linkIn.do", i, "post").then(t => {
                    w.log("report ad into success. adid=" + e);
                });
            }).catch(() => {
                w.log("report ad into fail. adid=" + e);
            });
        }
        static partakeOutletEvent(e, t = "", s = "", n = "", i = "") {
            L.isInit && k.getUserAsyn().then(r => {
                let a = "share_" + L.pid + "_" + e, o = r.openid, d = {
                    product_id: L.pid,
                    openid: o,
                    share_words_id: a,
                    share_photo_id: t,
                    share_type: s,
                    custom_param_1: n,
                    custom_param_2: i
                };
                b.instance.httpRequest(L.server_report + "/log/partakeOutlet.do", d, "post").then(e => {
                    w.log("report PartakeOutlet event success. imageId=" + t);
                });
            }).catch(() => {
                w.log("report PartakeOutlet event fail. imageId=" + t);
            });
        }
        static addUpGapOnlineTime() {
            return __awaiter(this, void 0, void 0, function*() {
                try {
                    w.resetTotalCount(L.lastAddUpDate), L.totalCount >= this.MAX_DAY_TIME && (L.totalCount = this.MAX_DAY_TIME - 1);
                    const e = L.totalCount + 1, t = L.gapCount + 1;
                    if (L.totalCount = e, L.gapCount = t, b.instance.putStorage(L.totalKey, e, !1), 
                    b.instance.putStorage(L.gapKey, t, !1), !L.isInit) return;
                    let s = new Date();
                    if (s.getTime() - P.lastAddUpTime < 59e3) return;
                    const n = e >= 300 && t > 300;
                    if (!(e < 300 && t > 60) && !n) return;
                    P.lastAddUpTime = s.getTime(), b.instance.putStorage(L.lastAddUpDataKey, L.lastAddUpDate, !1);
                    const i = yield k.getUserAsyn();
                    let r = i.channel_type, a = i.channel_id, o = i.openid, d = i.unionid ? i.unionid : "", l = {
                        product_id: L.pid,
                        openid: o,
                        unionid: d,
                        channel_type: r,
                        channel_id: a,
                        total_time: t
                    };
                    if (L.gapCount = 0, e <= 0 || L.totalCount <= 0) return;
                    b.instance.httpRequest(L.server_report + "/log/onlineTime.do", l, "post").then(e => {
                        b.instance.putStorage(L.gapKey, 0, !1), w.log("add up online time success.", "gap time", t);
                    }).catch(e => {});
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    w.log("add up online time error:", e);
                }
            });
        }
        static addUpGapOnlineTimeOnHide() {
            return __awaiter(this, void 0, void 0, function*() {
                try {
                    w.resetTotalCount(L.lastAddUpDate), L.totalCount >= this.MAX_DAY_TIME && (L.totalCount = this.MAX_DAY_TIME - 1);
                    const e = L.totalCount, t = L.gapCount;
                    if (e <= 0) return void (L.totalCount = 0);
                    if (!L.isInit) return;
                    b.instance.putStorage("last_report_date", L.lastAddUpDate, !1);
                    const s = yield k.getUserAsyn();
                    let n = s.channel_type, i = s.channel_id, r = s.openid, a = s.unionid ? s.unionid : "", o = {
                        product_id: L.pid,
                        openid: r,
                        unionid: a,
                        channel_type: n,
                        channel_id: i,
                        total_time: t
                    };
                    L.gapCount = 0, b.instance.httpRequest(L.server_report + "/log/onlineTime.do", o, "post").then(e => {
                        b.instance.putStorage(L.gapKey, 0, !1), w.log("add up online time(hide) success.", "gap time", t);
                    }).catch(e => {});
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    w.log("add up online time(hide). error:", e);
                }
            });
        }
        static hotLaunchEvent(e) {
            L.isInit && e && Promise.all([ k.getUserAsyn(), x.getGameVerContrLevel("") ]).then(([t, s]) => {
                let n = s && s.ip ? s.ip : "", i = w.parseUserChannel(e), r = i.channelType, a = i.channelId, o = b.instance.getSystemInfo(), d = o.model ? o.model : "", l = t.openid, h = t.unionid ? t.unionid : "", c = {
                    product_id: L.pid,
                    openid: l,
                    unionid: h,
                    channel_type: r,
                    channel_id: a,
                    ip: n,
                    model: encodeURIComponent(d),
                    behavior_id: 1
                };
                b.instance.httpRequest(L.server_report + "/log/login.do", c, "post").then(e => {
                    w.log("hot run event success");
                });
            }).catch(e => {
                w.log("hot run event error. ", e);
            });
        }
        static videoShowAndClickCountEvent(e = !1) {
            L.isInit && k.getUserAsyn().then(t => {
                let s = t.channel_type, n = t.channel_id, i = t.openid, r = t.unionid ? t.unionid : "", a = {
                    product_id: L.pid,
                    openid: i,
                    unionid: r,
                    channel_type: s,
                    channel_id: n,
                    total_count: 1,
                    total_click_count: e ? 1 : 0
                };
                b.instance.httpRequest(L.server_report + "/log/videoCount.do", a, "post").then(e => {
                    w.log("video end event success.");
                });
            }).catch(e => {
                w.log("video end event error." + e);
            });
        }
        static batchShowEvent(e) {
            L.isInit && k.getUserAsyn().then(t => {
                let s = t.openid, n = [], i = [], r = [];
                for (let t of e) n[n.length] = t.pid, i[i.length] = t.id, r[r.length] = t.category.toString();
                let a = {
                    product_id: L.pid,
                    openid: s,
                    spread_game_id: n.join(","),
                    custom_ad_id: i.join(","),
                    custom_param_1: r.join(",")
                };
                b.instance.httpRequest(L.server_report + "/log/spread.do", a, "post").then(e => {
                    w.log("report batch show event success. adIds=" + i);
                });
            }).catch(() => {
                w.log("report batch show event error");
            });
        }
        static clickEvent(e, t = 0) {
            if (!L.isInit) return;
            let s = e.id, n = e.pid;
            k.getUserAsyn().then(e => {
                let i = e.openid, r = {
                    product_id: L.pid,
                    openid: i,
                    target_to_product_id: n,
                    custom_ad_id: s,
                    custom_param_1: t
                };
                b.instance.httpRequest(L.server_report + "/log/linkEvent.do", r, "post").then(e => {
                    w.log("report ad click event success . adid = " + s);
                });
            }).catch(() => {
                w.log("report ad click event error. adid=" + s);
            });
        }
        static adJumpEvent(e, t = 0) {
            if (!L.isInit) return;
            let s = e.pid, n = e.id;
            k.getUserAsyn().then(e => {
                let i = e.openid, r = {
                    product_id: L.pid,
                    openid: i,
                    leapt_to_game_id: s,
                    custom_ad_id: n,
                    custom_param_1: t
                };
                b.instance.httpRequest(L.server_report + "/log/leapt.do", r, "post").then(e => {
                    w.log("report ad jump event success. adid=" + n);
                });
            }).catch(() => {
                w.log("report ad jump event error. adid=" + n);
            });
        }
        static appRunEvent(e) {
            "partake" == e.query.t ? this.partakeIntoEvent(e.query.sid, e.query.uid, e.shareTicket || "", e.query.imgId || "", e.query.partakeTime || "") : e.query.t && this.adIntoEvent(e.query.a, e.referrerInfo ? e.referrerInfo.appId : "");
        }
    }
    P.lastAddUpTime = 0, P.MAX_DAY_TIME = 86400;
    class V {
        static loadSharePicData() {
            return this.sharePicPromise || (this.sharePicPromise = new Promise((e, t) => {
                this.sharePicConfig = b.instance.findStorageByKey(L.sharePicDataKey) || [];
                let s = L.server_res + "/cdn/conf/" + L.appResPath + "/share_photo.conf";
                b.instance.httpRequest(s).then(t => {
                    "object" == typeof t ? (this.sharePicConfig = t, b.instance.putStorage(L.sharePicDataKey, t), 
                    w.log("load share pic data success.")) : w.log("load share pic data fail.", t), 
                    e(this.sharePicConfig);
                }).catch(() => {
                    e(this.sharePicConfig);
                });
            })), this.sharePicPromise;
        }
        static getRandomShareObject(e) {
            if (!this.sharePicConfig || !this.sharePicConfig.length || "object" != typeof this.sharePicConfig) return w.log("get share object fail. sharePicConfig is null or error."), 
            e;
            if (0 == e.imageId) return w.log("get share object success. imageId=0."), e;
            if (e.imageId) {
                w.log("get share object , imageId=" + e.imageId);
                let t = this.findShareObjectByImageId(e);
                if (t) return t;
            }
            return this.findShareObjectByRandom(this.filterSecondary(e), e);
        }
        static filterSecondary(e) {
            const t = this.sharePicConfig.filter(t => {
                if (t.ver) {
                    if (!e.version || t.ver != e.version) return !1;
                } else if (e.version) return !1;
                return this.filterOtherParam(t, e);
            }, this);
            let s = t;
            return !t.length && e.version && (s = this.sharePicConfig.filter(t => !t.ver && this.filterOtherParam(t, e), this)), 
            s;
        }
        static findShareObjectByRandom(e, t) {
            if (!e || 0 == e.length) return w.log("get share object1 : filter share image list is null"), 
            t;
            const s = w.roundTableSort(e, "weight");
            return s ? this.getShareImageInfo(s, t) : (w.log("get share object3 : random share image is null"), 
            t);
        }
        static findShareObjectByImageId(e) {
            let t, s = this.sharePicConfig.length;
            for (let n = 0; n < s; n++) if (this.sharePicConfig[n].pic_id == e.imageId) {
                t = this.sharePicConfig[n], w.log("find share object imageId = ", e.imageId, " , shareImage = ", t);
                break;
            }
            return this.getShareImageInfo(t, e);
        }
        static getShareImageInfo(e, t) {
            if (!e) return void w.log("get share image info : share image is null.");
            const s = Object.assign({}, t);
            return s.title = s.nickName ? e.text.replace("{nickname}", s.nickName) : e.text, 
            s.imageUrl = e.pic, s.imageId = e.pic_id, delete s.nickName, delete s.scoreValue, 
            s;
        }
        static filterOtherParam(e, t) {
            if (1 === Number(e.shield) && !x.checkFission()) return w.log("pic filter--shield=", e.shield, " , id=", e.pic_id), 
            !1;
            if ((t.scoreValue || 0) < (Number(e.number) || 0)) return w.log("pic filter--number=", e.number, " , id=", e.pic_id), 
            !1;
            if (!this.checkMoreOpenPeriodLimit(e.time_show)) return w.log("pic filter--time_show=", e.time_show, " , id=", e.pic_id), 
            !1;
            if (!x.gameVerContrData) return w.log("pic filter--version controller config is null", " , id=", e.pic_id), 
            !0;
            if (1 === Number(e.shield) && 1 === Number(x.gameVerContrData.check)) return w.log("pic filter--shield=", e.shield, ", version controller config check=1 , id=", e.pic_id), 
            !1;
            if (e.city) {
                const t = x.gameVerContrData.city, s = x.gameVerContrData.province;
                if (w.isAbroadCity(x.gameVerContrData)) return w.log("pic filter--city=", e.city, ", id=", e.pic_id), 
                !1;
                if (t && -1 != e.city.indexOf(t)) return w.log("pic filter--city=", e.city, ", current city=", t, ", id=", e.pic_id), 
                !1;
                if (s && -1 != e.city.indexOf(s)) return w.log("pic filter--city=", e.city, ", current province=", s, ", id=", e.pic_id), 
                !1;
            }
            return !0;
        }
        static checkMoreOpenPeriodLimit(e) {
            if (!e) return !0;
            let t = e.split(",");
            for (let e = 0; e < t.length; e++) if (this.checkOpenTimes(t[e])) return !0;
            return !1;
        }
        static checkOpenTimes(e) {
            let t = !1;
            if (e) {
                const [s, n] = e.indexOf("_") > 0 ? e.split("_", 2) : e.split("-", 2), i = new Date().getHours();
                parseInt(s || "0") <= i && i <= parseInt(n || "24") && (t = !0);
            }
            return t;
        }
        static genSharePath(e, t = "/pages/index/index", s, n) {
            return t + "?" + this.genShareQuery(e, s, n);
        }
        static genShareQuery(e, t, s) {
            return "object" != typeof t && (t = {}), t.t = "partake", t.sid = "partake_" + L.pid + "_" + e, 
            t.uid = k.getUser().openid, t.partakeTime = new Date().getTime(), s && (t.imgId = s), 
            w.buildHttpQuery(t);
        }
    }
    V.sharePicConfig = [];
    class B {
        findStorageByKey(e) {
            return wx.getStorageSync(L.storagePrefix + e);
        }
        putStorage(e, t, s = !0) {
            try {
                s ? wx.setStorageSync(L.storagePrefix + e, t) : wx.setStorage({
                    key: L.storagePrefix + e,
                    data: t
                });
            } catch (e) {}
        }
        httpRequest(e, t, s = "get", n = 2) {
            return __awaiter(this, void 0, void 0, function*() {
                if ("none" == (yield new Promise((e, t) => {
                    wx.getNetworkType({
                        success: function(t) {
                            e(t);
                        },
                        fail: function(e) {
                            t(e);
                        }
                    });
                })).networkType) throw "current network type is none";
                let i = "";
                if (t) {
                    for (let e in t) i += e + "=" + t[e] + "&";
                    i && (i = i.substr(0, i.length - 1), "get" == s && (e += -1 == e.indexOf("?") ? "?" : "&", 
                    e += i));
                }
                return yield new Promise((i, r) => {
                    let a = {
                        url: e,
                        header: {
                            "Content-Type": "application/json;charset=UTF-8"
                        }
                    };
                    "get" != s && (a.method = "post", a.data = t);
                    let o = 0, retrySend = function(e) {
                        return ++o <= n ? (wx.request(a), !0) : (r(e), !1);
                    };
                    a.success = function(e) {
                        e.statusCode && e.statusCode >= 200 && e.statusCode < 400 ? i(e.data) : retrySend(e);
                    }, a.fail = function(e) {
                        retrySend(e);
                    }, wx.request(a);
                });
            });
        }
        getUser(e) {
            return new Promise((t, s) => {
                this.getUserByCode(e).then(e => {
                    t(e);
                }).catch(n => {
                    this.getUserByCode(e).then(e => {
                        t(e);
                    }).catch(n => {
                        this.getUserByCode(e).then(e => {
                            t(e);
                        }).catch(e => {
                            s(e);
                        });
                    });
                });
            });
        }
        getUserByCode(e) {
            return new Promise((t, s) => {
                wx.login({
                    success: n => {
                        let i = {
                            code: n.code,
                            encryptedData: "",
                            iv: ""
                        };
                        L.isNeedUnionid ? wx.getSetting({
                            success: n => {
                                n.authSetting["scope.userInfo"] ? wx.getUserInfo({
                                    withCredentials: !0,
                                    success: n => {
                                        let r = n.data[0];
                                        i.encryptedData = r.encryptedData, i.iv = r.iv, this.loginByCredentialData(i, e).then(e => {
                                            t(e);
                                        }).catch(e => {
                                            s(e);
                                        });
                                    }
                                }) : this.loginByCredentialData(i, e).then(e => {
                                    t(e);
                                }).catch(e => {
                                    s(e);
                                });
                            },
                            fail: n => {
                                this.loginByCredentialData(i, e).then(e => {
                                    t(e);
                                }).catch(e => {
                                    s(e);
                                });
                            }
                        }) : this.loginByCredentialData(i, e).then(e => {
                            t(e);
                        }).catch(e => {
                            s(e);
                        });
                    },
                    fail: e => {
                        s(e);
                    }
                });
            });
        }
        loginByCredentialData(e, t) {
            let s = w.parseUserChannel(t);
            return new Promise((n, i) => {
                let r = {
                    product_id: L.pid,
                    code: e.code,
                    unionid: e.encryptedData && e.iv ? "true" : "false",
                    channel_type: s.channelType,
                    channel_id: s.channelId,
                    channel_openid: w.paraseChannelUserId(t),
                    encryptedData: encodeURIComponent(e.encryptedData),
                    iv: encodeURIComponent(e.iv),
                    model: encodeURIComponent(this.getSystemInfo().model)
                }, a = L.server_login + "/server/login.do";
                this.httpRequest(a, r, "post", 0).then(e => {
                    e && 200 == e.code && e.result && e.result.openid ? (w.log("login success. ", e), 
                    n(e.result)) : (w.log("login fail, openid is null. ", e), i("login fail."));
                }).catch(e => {
                    w.log("login error.", e), i(e);
                });
            });
        }
        getUserInfo() {
            return new Promise((e, t) => {
                wx.getSetting({
                    fail: e => {
                        t();
                    },
                    success: s => {
                        s.authSetting["scope.userInfo"] ? wx.getUserInfo({
                            fail: e => {
                                t();
                            },
                            success: t => {
                                let s = t.data[0];
                                e(s);
                            }
                        }) : t();
                    }
                });
            });
        }
        getSystemInfo() {
            let e = wx.getSystemInfoSync();
            return {
                platform: e.platform,
                model: e.model
            };
        }
        getEnterOptions() {
            return wx.getLaunchOptionsSync();
        }
        navigateTo(e) {
            return new Promise((t, s) => {
                if (!wx.redirectTo && -1 == w.compareVersionTx(wx.getSystemInfoSync().SDKVersion, "2.2.0")) return w.log("navigateTo app fail，appId=", e.appid, "path=", e.page, "SDKVersion=", wx.getSystemInfoSync().SDKVersion), 
                void t(null);
                wx.showLoading({
                    title: "waiting...",
                    mask: !0
                }), setTimeout(wx.hideLoading, 5e3), wx.navigateToMiniProgram({
                    appId: e.appid,
                    path: e.page,
                    success: s => {
                        wx.hideLoading(), t(null), w.log("navigateTo app success，appId=", e.appid, "path=", e.page);
                    },
                    fail: n => {
                        wx.hideLoading(), e.ad_image && -1 != [ ".jpg", ".gif", ".png" ].indexOf(e.ad_image.substr(-4)) ? (wx.previewImage({
                            urls: [ e.ad_image ]
                        }), t(null), w.log("navigateTo app fail,open image，appId=", e.appid, "path=", e.page)) : (s(), 
                        w.log("navigateTo app fail,image is null，appId=", e.appid, "path=", e.page, JSON.stringify(n)));
                    }
                });
            });
        }
        navigateToSync(e, t) {
            wx.redirectTo || -1 != w.compareVersionTx(wx.getSystemInfoSync().SDKVersion, "2.2.0") ? (wx.showLoading({
                title: "waiting...",
                mask: !0
            }), setTimeout(wx.hideLoading, 5e3), wx.navigateToMiniProgram({
                appId: e.appid,
                path: e.page,
                success: e => {
                    wx.hideLoading(), t(!0);
                },
                fail: s => {
                    wx.hideLoading(), e.ad_image && -1 != [ ".jpg", ".gif", ".png" ].indexOf(e.ad_image.substr(-4)) ? (wx.previewImage({
                        urls: [ e.ad_image ]
                    }), t(!0)) : t(!1);
                }
            })) : t(!0);
        }
        getShareObject(e) {
            const t = V.getRandomShareObject(e), s = {};
            s.title = t.title, s.imageUrl = t.imageUrl;
            let n = "", i = t.imageId ? t.imageId : "";
            wx.redirectTo ? (s.path = V.genSharePath(e.sceneCode, e.path || "/pages/index/index", e.params || {}, i), 
            n = s.path) : (s.query = V.genShareQuery(t.sceneCode, t.params || {}, i), n = s.query);
            let r = n ? w.getHttpQueryValueByKey(n, "partakeTime") : "";
            return P.partakeOutletEvent(e.sceneCode, i.toString(), "", "", r), w.log("get share object :", JSON.stringify(s)), 
            s;
        }
        getLocalCacheResUrl(e, t = !1) {
            return new Promise((s, n) => {
                if ("https://" !== e.substring(0, 8).toLowerCase()) return void s(e);
                if (B.downloadQueue.indexOf(e) >= 0) return void s(e);
                const i = wx.env.USER_DATA_PATH + "/xjingsdk/" + e.substring(8), r = wx.getFileSystemManager();
                try {
                    if (r.accessSync(i), r.statSync(i).isFile()) return s(i), void w.addRes2MemoryCache(i);
                    r.rmdirSync(i);
                } catch (e) {}
                !t && s(e), B.downloadQueue.push(e), wx.downloadFile({
                    url: e,
                    success: n => {
                        200 === n.statusCode ? (this.mkdirRecursiveSync(i.substring(0, i.lastIndexOf("/"))), 
                        r.saveFileSync(n.tempFilePath, i), w.addRes2MemoryCache(i), t && s(i)) : t && s(e);
                    },
                    fail: () => {
                        t && s(e);
                    },
                    complete: () => {
                        B.downloadQueue.splice(B.downloadQueue.indexOf(e), 1);
                    }
                });
            });
        }
        mkdirRecursiveSync(e) {
            const t = wx.getFileSystemManager(), s = e.replace(wx.env.USER_DATA_PATH, "").split("/");
            let n = wx.env.USER_DATA_PATH;
            for (let e of s) if (e) {
                n += "/" + e;
                try {
                    t.accessSync(n), t.statSync(n).isDirectory() || (t.unlinkSync(n), t.mkdirSync(n));
                } catch (e) {
                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                    t.mkdirSync(n);
                }
            }
            return n;
        }
        setTimeout(e, t) {
            return setTimeout(e, t);
        }
        setInterval(e, t) {
            return setInterval(e, t);
        }
        clearTimeout(e) {
            clearTimeout(e);
        }
        clearInterval(e) {
            clearInterval(e);
        }
        preHandleInit() {
            try {
                wx.onAppShow(e => {
                    P.appRunEvent(e), P.hotLaunchEvent(e);
                }), wx.onAppHide(e => {
                    P.addUpGapOnlineTimeOnHide();
                });
            } catch (e) {}
            try {
                wx.onShow(e => {
                    P.appRunEvent(e), P.hotLaunchEvent(e);
                }), wx.onHide(e => {
                    P.addUpGapOnlineTimeOnHide();
                });
            } catch (e) {}
        }
        handleAfterLogin(e, t) {}
    }
    B.downloadQueue = [];
    class b {
        static get instance() {
            if (!this._inst) if ("wx" === this.platMark) this._inst = new B(), w.log("platform=wx"); else w.log("platform=default"), 
            this._inst = new U();
            return this._inst;
        }
        static get platMark() {
            return "object" == typeof wx ? "wx" : "unknow";
        }
    }
    class M {
        static getRecommedList(e = !1, t = 0, s = 0) {
            return this.getAdList(e, t, s, this.AD_TYPE_KEY_RECOMMED);
        }
        static getBannerList(e = !1, t = 0, s = 0) {
            return this.getAdList(e, t, s, this.AD_TYPE_KEY_BANNER);
        }
        static getRewardedList(e = !1, t = 0, s = 0) {
            return this.getAdList(e, t, s, this.AD_TYPE_KEY_REWARDED);
        }
        static getIconAd(e = 0) {
            return new Promise((e, t) => {
                let s = this.iconDataList;
                if (null == s || null == s || !s.length) return w.log("get icon ad , No qualified ad item."), 
                void e(null);
                this.handleResCache(s).then(t => {
                    let s = w.roundTableSort(t, "table");
                    P.batchShowEvent([ s ]), e(s);
                });
            });
        }
        static preLoadAdData() {
            this.loadAdConfData();
        }
        static loadAdConfData() {
            return this.adConfPromise || (this.adConfPromise = new Promise((e, t) => {
                let s = b.instance.findStorageByKey("xjingAdConfData") || [];
                this.checkAdConfVersion().then(t => {
                    t && this.fetchAdConfByVersion(t).then(s => {
                        if (s) return this.fixAdData(s), e(s), b.instance.putStorage("xjingAdConfVersion", t), 
                        b.instance.putStorage("xjingAdConfData", s), void w.log("update ad config data success.", s);
                    }), this.fixAdData(s), e(s);
                });
            })), this.adConfPromise;
        }
        static checkAdConfVersion() {
            return new Promise((e, t) => {
                let s, n = L.server_res + "/cdn/conf/" + L.appResPath + "/v.conf";
                b.instance.httpRequest(n).then(t => {
                    let n = b.instance.findStorageByKey("xjingAdConfVersion");
                    w.log("check ad config version: res=", t), "object" != typeof t ? w.log("check ad config version fail.") : n == t.ver ? w.log("check ad config version success, update=false. localVer=" + n + "; currVer=" + t.ver) : (s = t.ver, 
                    w.log("check ad config version success, update=true. localVer=" + n + "; currVer=" + t.ver)), 
                    e(s);
                }).catch(t => {
                    w.log("check ad config version error. ", t), e(s);
                });
            });
        }
        static fetchAdConfByVersion(e) {
            return new Promise((t, s) => {
                let n = L.server_res + "/cdn/conf/" + L.appResPath + "/" + e;
                b.instance.httpRequest(n).then(e => {
                    if ("object" != typeof e) return w.log("fetch ad conf fail. res=", e), void t(null);
                    t(e), w.log("fetch ad conf success. len=" + e.length);
                }).catch(e => {
                    w.log("fetch ad conf error. ", e), t(null);
                });
            });
        }
        static fixAdData(e) {
            return new Promise((t, s) => {
                Promise.all([ x.getGameVerContrLevel(""), this.loadFilterData() ]).then(([s, n]) => {
                    this.mFilterData = n;
                    let i = JSON.parse(JSON.stringify(e));
                    for (let e of i) this.reviseAd(e, this.mFilterData.gender), this.classifyAd(e, n, s);
                    t();
                }).catch(e => {
                    t();
                });
            });
        }
        static classifyAd(e, t, s) {
            e.platform && t.os && e.platform != t.os && "devtools" != t.os || e.sex && 3 != e.sex && e.sex != t.gender || (this.isCityInvisible(s, e.city_hide) ? w.log("check city hide：", e.city_hide, " ; id:", e.id) : this.isCityVisible(s, e.city_show) ? e.category == this.AD_TYPE_ICON ? (this.iconDataList || (this.iconDataList = []), 
            this.iconDataList.push(e)) : e.category == this.AD_TYPE_REWARDED ? (this.rewardDataList || (this.rewardDataList = []), 
            this.rewardDataList.push(e)) : e.category == this.AD_TYPE_BANNER ? (this.bannerDataList || (this.bannerDataList = []), 
            this.bannerDataList.push(e)) : e.category == this.AD_TYPE_RECOMMED && (this.recommedDataList || (this.recommedDataList = []), 
            this.recommedDataList.push(e)) : w.log("check city show：", e.city_show, " ; id:", e.id));
        }
        static reviseAd(e, t) {
            e.start_time && e.end_time && e.plan_number || (e.page += -1 == e.page.indexOf("?") ? "?" : "&", 
            e.page += "t=inner&a=" + e.id + "&gender=" + t + "&pid=" + L.pid);
            let s = w.getHttpQueryValueByKey(e.page, "bridge_appid"), n = w.getHttpQueryValueByKey(e.page, "bridge_path");
            return s && (e.page = n + "?" + e.page.replace("bridge_appid=" + s, "bridge2appid=" + e.appid).replace("bridge_path=" + n, "bridge2path=" + e.page.split("?")[0]).split("?")[1], 
            e.appid = s), e.ad_image && 0 != e.ad_image.indexOf("http") && (e.ad_image = L.server_res + "/cdn/images/" + e.ad_image), 
            e.icon && 0 != e.icon.indexOf("http") && (e.icon = L.server_res + "/cdn/images/" + e.icon), 
            e.image && 0 != e.image.indexOf("http") && (e.image = L.server_res + "/cdn/images/" + e.image), 
            e.banner && 0 != e.banner.indexOf("http") && (e.banner = L.server_res + "/cdn/images/" + e.banner), 
            e.clicked = !this.checkFirstClick(Number(e.id)), e.clicked && (e.table = Number(e.table) / 2), 
            e;
        }
        static loadFilterData() {
            return new Promise((e, t) => {
                b.instance.getUserInfo().then(t => {
                    e({
                        os: b.instance.getSystemInfo().platform,
                        gender: Number(t.gender)
                    });
                }).catch(() => {
                    e({
                        os: b.instance.getSystemInfo().platform,
                        gender: -1
                    });
                });
            });
        }
        static getAdList(e = !1, t = 0, s = 0, n = "") {
            return new Promise((s, i) => {
                let r = this.recommedDataList;
                if (n == this.AD_TYPE_KEY_REWARDED ? r = this.rewardDataList : n == this.AD_TYPE_KEY_ICON ? r = this.iconDataList : n == this.AD_TYPE_KEY_RECOMMED ? r = this.recommedDataList : n == this.AD_TYPE_KEY_BANNER && (r = this.bannerDataList), 
                null == r || null == r || !r.length) return w.log("get ad list, No qualified ad item, ad list is null. adType = " + n), 
                void s(null);
                this.handleResCache(r).then(i => {
                    let r = e ? w.roundTableSort(i, "table", !1) : i;
                    t && (r = r.slice(0, t)), P.batchShowEvent(r), s(r), w.log("get ad list, adType=", n, " , data list = ", r);
                });
            });
        }
        static isCityVisible(e, t) {
            const s = e.province, n = e.city;
            return (!t || "all" == t) && !w.isAbroadCity(e) || t && n && -1 != t.indexOf(n) || t && s && -1 != t.indexOf(s);
        }
        static isCityInvisible(e, t) {
            const s = e.province, n = e.city;
            return "all" == t || w.isAbroadCity(e) || t && n && -1 != t.indexOf(n) || t && s && -1 != t.indexOf(s);
        }
        static handleResCache(e, t = !1) {
            return __awaiter(this, void 0, void 0, function*() {
                if (!e) return e;
                let s = e.length;
                for (let n = 0; n < s; n++) {
                    let s = e[n];
                    this.handleResCacheByKey("ad_image", s, t), this.handleResCacheByKey("icon", s, t), 
                    this.handleResCacheByKey("image", s, t), this.handleResCacheByKey("banner", s, t);
                }
                return e;
            });
        }
        static handleResCacheByKey(e, t, s = !1) {
            return __awaiter(this, void 0, void 0, function*() {
                let n = t[e];
                return n && -1 == n.indexOf("://usr/xjingsdk/") && (s ? t[e] = yield b.instance.getLocalCacheResUrl(n, !1) : (t[e] = w.getResFromMemoryCache(n), 
                t[e] || (t[e] = n, b.instance.getLocalCacheResUrl(t[e], !1)))), t;
            });
        }
        static clickAndNavigate(e, t = 0) {
            return new Promise((s, n) => {
                wx.getNetworkType({
                    success: n => {
                        if ("none" == n.networkType) return wx.showToast({
                            title: "network error,navigate to app fail.",
                            icon: "none"
                        }), void s({
                            navigateTo: !1,
                            firstClick: !1
                        });
                        P.clickEvent(e, t), b.instance.navigateTo(e).then(n => {
                            let i = this.checkFirstClick(Number(e.id), !0);
                            s({
                                navigateTo: !0,
                                firstClick: i
                            }), P.adJumpEvent(e, t);
                        }).catch(e => {
                            s({
                                navigateTo: !1,
                                firstClick: !1
                            });
                        });
                    },
                    fail: () => {
                        s({
                            navigateTo: !1,
                            firstClick: !1
                        });
                    }
                });
            });
        }
        static checkFirstClick(e, t = !1) {
            let s = !1, n = b.instance.findStorageByKey("xjingadClick") || [];
            return -1 == n.indexOf(e) && (s = !0, t && (n.push(e), b.instance.putStorage("xjingadClick", n))), 
            s;
        }
    }
    M.AD_TYPE_RECOMMED = 1, M.AD_TYPE_ICON = 2, M.AD_TYPE_REWARDED = 3, M.AD_TYPE_BANNER = 4, 
    M.AD_TYPE_KEY_RECOMMED = "RECOMMED", M.AD_TYPE_KEY_ICON = "ICON", M.AD_TYPE_KEY_REWARDED = "REWARDED", 
    M.AD_TYPE_KEY_BANNER = "BANNER";
    class G {
        static preHandelInitParams(e, t = !1) {
            return L.isInit ? (w.log("multiple init adm."), !0) : (L.pid = e, L.appResPath = e, 
            L.enterOptions = b.instance.getEnterOptions(), L.isNeedUnionid = t, L.isInit = !0, 
            w.log("adm init begin, pid=", e, "enterOptions", JSON.stringify(L.enterOptions)), 
            L.totalCount = Number(b.instance.findStorageByKey(L.totalKey) || 0), L.gapCount = Number(b.instance.findStorageByKey(L.gapKey) || 0), 
            L.lastAddUpDate = b.instance.findStorageByKey(L.lastAddUpDataKey), w.resetTotalCount(L.lastAddUpDate), 
            b.instance.setInterval(P.addUpGapOnlineTime, 1e3), V.loadSharePicData(), M.preLoadAdData(), 
            x.getGameConfig(), !1);
        }
        static init(e, t = !1) {
            return G.preHandelInitParams(e, t) ? (w.log("multiple init adm."), k.getUserAsyn().then(e => e.openid)) : (b.instance.preHandleInit(), 
            new Promise((e, t) => {
                b.instance.getUser(L.enterOptions).then(s => {
                    k.setUser(s) ? (P.appRunEvent(L.enterOptions), w.log("init success. openid=" + s.openid), 
                    e(s.openid)) : (w.log("init fail."), t());
                }).catch(e => {
                    w.log("init error.", e), t();
                });
            }));
        }
        static initWithThirdUser(e, t) {
            return G.preHandelInitParams(e) ? (w.log("multiple init adm."), k.getUserAsyn().then(e => e.openid)) : (b.instance.preHandleInit(), 
            new Promise((e, s) => {
                k.thirdLogin(t).then(t => {
                    P.appRunEvent(L.enterOptions), e(t.openid), w.log("init with third user success. openid=" + t.openid);
                }).catch(e => {
                    w.log("init with third user error.", e), s();
                });
            }));
        }
    }
    return e.AdHelper = M, e.BasePlat = b, e.CommHelper = w, e.DefaultPlat = U, e.GameConfigHelper = x, 
    e.Global = L, e.InitHelper = G, e.InsertWay = class {
        gain() {
            throw new Error("Method not implemented.");
        }
    }, e.MenuInfo = class {}, e.Message = p, e.PlatformType = t, e.ReportHelper = P, 
    e.RewardGainWay = m, e.RewardGainWayParams = E, e.SDK_VERSION = s, e.SHA256 = class {
        constructor() {
            this.hexcase = 0, this.b64pad = "", this.sha256_K = new Array(1116352408, 1899447441, -1245643825, -373957723, 961987163, 1508970993, -1841331548, -1424204075, -670586216, 310598401, 607225278, 1426881987, 1925078388, -2132889090, -1680079193, -1046744716, -459576895, -272742522, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, -1740746414, -1473132947, -1341970488, -1084653625, -958395405, -710438585, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, -2117940946, -1838011259, -1564481375, -1474664885, -1035236496, -949202525, -778901479, -694614492, -200395387, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, -2067236844, -1933114872, -1866530822, -1538233109, -1090935817, -965641998);
        }
        hex_sha256(e) {
            return this.rstr2hex(this.rstr_sha256(this.str2rstr_utf8(e)));
        }
        b64_sha256(e) {
            return this.rstr2b64(this.rstr_sha256(this.str2rstr_utf8(e)));
        }
        any_sha256(e, t) {
            return this.rstr2any(this.rstr_sha256(this.str2rstr_utf8(e)), t);
        }
        hex_hmac_sha256(e, t) {
            return this.rstr2hex(this.rstr_hmac_sha256(this.str2rstr_utf8(e), this.str2rstr_utf8(t)));
        }
        b64_hmac_sha256(e, t) {
            return this.rstr2b64(this.rstr_hmac_sha256(this.str2rstr_utf8(e), this.str2rstr_utf8(t)));
        }
        any_hmac_sha256(e, t, s) {
            return this.rstr2any(this.rstr_hmac_sha256(this.str2rstr_utf8(e), this.str2rstr_utf8(t)), s);
        }
        sha256_vm_test() {
            return "ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad" == this.hex_sha256("abc").toLowerCase();
        }
        rstr_sha256(e) {
            return this.binb2rstr(this.binb_sha256(this.rstr2binb(e), 8 * e.length));
        }
        rstr_hmac_sha256(e, t) {
            var s = this.rstr2binb(e);
            s.length > 16 && (s = this.binb_sha256(s, 8 * e.length));
            for (var n = Array(16), i = Array(16), r = 0; r < 16; r++) n[r] = 909522486 ^ s[r], 
            i[r] = 1549556828 ^ s[r];
            var a = this.binb_sha256(n.concat(this.rstr2binb(t)), 512 + 8 * t.length);
            return this.binb2rstr(this.binb_sha256(i.concat(a), 768));
        }
        rstr2hex(e) {
            try {
                this.hexcase;
            } catch (e) {
                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                this.hexcase = 0;
            }
            for (var t, s = this.hexcase ? "0123456789ABCDEF" : "0123456789abcdef", n = "", i = 0; i < e.length; i++) t = e.charCodeAt(i), 
            n += s.charAt(t >>> 4 & 15) + s.charAt(15 & t);
            return n;
        }
        rstr2b64(e) {
            try {
                this.b64pad;
            } catch (e) {
                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                this.b64pad = "";
            }
            for (var t = "", s = e.length, n = 0; n < s; n += 3) for (var i = e.charCodeAt(n) << 16 | (n + 1 < s ? e.charCodeAt(n + 1) << 8 : 0) | (n + 2 < s ? e.charCodeAt(n + 2) : 0), r = 0; r < 4; r++) 8 * n + 6 * r > 8 * e.length ? t += this.b64pad : t += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i >>> 6 * (3 - r) & 63);
            return t;
        }
        rstr2any(e, t) {
            var s, n, i, r, a = t.length, o = Array(), d = Array(Math.ceil(e.length / 2));
            for (s = 0; s < d.length; s++) d[s] = e.charCodeAt(2 * s) << 8 | e.charCodeAt(2 * s + 1);
            for (;d.length > 0; ) {
                for (r = Array(), i = 0, s = 0; s < d.length; s++) i = (i << 16) + d[s], i -= (n = Math.floor(i / a)) * a, 
                (r.length > 0 || n > 0) && (r[r.length] = n);
                o[o.length] = i, d = r;
            }
            var l = "";
            for (s = o.length - 1; s >= 0; s--) l += t.charAt(o[s]);
            var h = Math.ceil(8 * e.length / (Math.log(t.length) / Math.log(2)));
            for (s = l.length; s < h; s++) l = t[0] + l;
            return l;
        }
        str2rstr_utf8(e) {
            for (var t, s, n = "", i = -1; ++i < e.length; ) t = e.charCodeAt(i), s = i + 1 < e.length ? e.charCodeAt(i + 1) : 0, 
            55296 <= t && t <= 56319 && 56320 <= s && s <= 57343 && (t = 65536 + ((1023 & t) << 10) + (1023 & s), 
            i++), t <= 127 ? n += String.fromCharCode(t) : t <= 2047 ? n += String.fromCharCode(192 | t >>> 6 & 31, 128 | 63 & t) : t <= 65535 ? n += String.fromCharCode(224 | t >>> 12 & 15, 128 | t >>> 6 & 63, 128 | 63 & t) : t <= 2097151 && (n += String.fromCharCode(240 | t >>> 18 & 7, 128 | t >>> 12 & 63, 128 | t >>> 6 & 63, 128 | 63 & t));
            return n;
        }
        str2rstr_utf16le(e) {
            for (var t = "", s = 0; s < e.length; s++) t += String.fromCharCode(255 & e.charCodeAt(s), e.charCodeAt(s) >>> 8 & 255);
            return t;
        }
        str2rstr_utf16be(e) {
            for (var t = "", s = 0; s < e.length; s++) t += String.fromCharCode(e.charCodeAt(s) >>> 8 & 255, 255 & e.charCodeAt(s));
            return t;
        }
        rstr2binb(e) {
            for (var t = Array(e.length >> 2), s = 0; s < t.length; s++) t[s] = 0;
            for (s = 0; s < 8 * e.length; s += 8) t[s >> 5] |= (255 & e.charCodeAt(s / 8)) << 24 - s % 32;
            return t;
        }
        binb2rstr(e) {
            for (var t = "", s = 0; s < 32 * e.length; s += 8) t += String.fromCharCode(e[s >> 5] >>> 24 - s % 32 & 255);
            return t;
        }
        sha256_S(e, t) {
            return e >>> t | e << 32 - t;
        }
        sha256_R(e, t) {
            return e >>> t;
        }
        sha256_Ch(e, t, s) {
            return e & t ^ ~e & s;
        }
        sha256_Maj(e, t, s) {
            return e & t ^ e & s ^ t & s;
        }
        sha256_Sigma0256(e) {
            return this.sha256_S(e, 2) ^ this.sha256_S(e, 13) ^ this.sha256_S(e, 22);
        }
        sha256_Sigma1256(e) {
            return this.sha256_S(e, 6) ^ this.sha256_S(e, 11) ^ this.sha256_S(e, 25);
        }
        sha256_Gamma0256(e) {
            return this.sha256_S(e, 7) ^ this.sha256_S(e, 18) ^ this.sha256_R(e, 3);
        }
        sha256_Gamma1256(e) {
            return this.sha256_S(e, 17) ^ this.sha256_S(e, 19) ^ this.sha256_R(e, 10);
        }
        sha256_Sigma0512(e) {
            return this.sha256_S(e, 28) ^ this.sha256_S(e, 34) ^ this.sha256_S(e, 39);
        }
        sha256_Sigma1512(e) {
            return this.sha256_S(e, 14) ^ this.sha256_S(e, 18) ^ this.sha256_S(e, 41);
        }
        sha256_Gamma0512(e) {
            return this.sha256_S(e, 1) ^ this.sha256_S(e, 8) ^ this.sha256_R(e, 7);
        }
        sha256_Gamma1512(e) {
            return this.sha256_S(e, 19) ^ this.sha256_S(e, 61) ^ this.sha256_R(e, 6);
        }
        binb_sha256(e, t) {
            var s, n, i, r, a, o, d, l, h, c, g, u, _ = new Array(1779033703, -1150833019, 1013904242, -1521486534, 1359893119, -1694144372, 528734635, 1541459225), S = new Array(64);
            for (e[t >> 5] |= 128 << 24 - t % 32, e[15 + (t + 64 >> 9 << 4)] = t, h = 0; h < e.length; h += 16) {
                for (s = _[0], n = _[1], i = _[2], r = _[3], a = _[4], o = _[5], d = _[6], l = _[7], 
                c = 0; c < 64; c++) S[c] = c < 16 ? e[c + h] : this.safe_add(this.safe_add(this.safe_add(this.sha256_Gamma1256(S[c - 2]), S[c - 7]), this.sha256_Gamma0256(S[c - 15])), S[c - 16]), 
                g = this.safe_add(this.safe_add(this.safe_add(this.safe_add(l, this.sha256_Sigma1256(a)), this.sha256_Ch(a, o, d)), this.sha256_K[c]), S[c]), 
                u = this.safe_add(this.sha256_Sigma0256(s), this.sha256_Maj(s, n, i)), l = d, d = o, 
                o = a, a = this.safe_add(r, g), r = i, i = n, n = s, s = this.safe_add(g, u);
                _[0] = this.safe_add(s, _[0]), _[1] = this.safe_add(n, _[1]), _[2] = this.safe_add(i, _[2]), 
                _[3] = this.safe_add(r, _[3]), _[4] = this.safe_add(a, _[4]), _[5] = this.safe_add(o, _[5]), 
                _[6] = this.safe_add(d, _[6]), _[7] = this.safe_add(l, _[7]);
            }
            return _;
        }
        safe_add(e, t) {
            var s = (65535 & e) + (65535 & t);
            return (e >> 16) + (t >> 16) + (s >> 16) << 16 | 65535 & s;
        }
    }, e.Adm = C, e.SdkEvent = n, e.SdkGameCfg = class {}, e.SdkMsg = A, e.SdkMsgDefine = I, 
    e.SdkMsgEvent = f, e.ShareHelper = V, e.ShareWay = R, e.SystemInfo = class {}, e.UserHelper = k, 
    e.VideoWay = class {
        constructor(e) {
            this._videoParam = e;
        }
        gain() {
            if (fx.Utils.isOnPC()) return void fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                code: e.SdkCode.REWARD_GAIN_SUCCESS,
                way: e.GetRewardSDKWay.VIDEO,
                rewardType: e.GetRewardSDKWay.VIDEO
            });
            let t = adm.Adm.instance.isHasVideo(this._videoParam.id);
            e.VideoState.UNENABLED === t ? adm.Adm.instance.showModal("今天已经没有视频啦,分享同样可以获得奖励哟!", "Tips", "分享获得", Laya.Handler.create(this, () => {
                m.inst.gain(new R(this._videoParam));
            }), "明天再来", Laya.Handler.create(this, function() {
                fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_FAIL
                });
            })) : (fx.EventCenter.instance.once(n.E_AD_VIDEO, this, t => {
                e.SdkCode.AD_VIDEO_SUCCESS === t.code ? fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                    code: e.SdkCode.REWARD_GAIN_SUCCESS,
                    way: e.GetRewardSDKWay.VIDEO,
                    rewardType: e.GetRewardSDKWay.VIDEO
                }) : e.SdkCode.AD_VIDEO_UNCOMPLETE === t.code && adm.Adm.instance.showModal("Watch the video before you get rewarded yo!!!!", "Tips", "继续观看", Laya.Handler.create(this, () => {
                    this.gain();
                }), "Come back later", Laya.Handler.create(this, function() {
                    fx.EventCenter.instance.event(n.E_REWARD_GAIN, {
                        code: e.SdkCode.REWARD_GAIN_FAIL
                    });
                }));
            }), adm.Adm.instance.playVideo(this._videoParam.id, this._videoParam.title));
        }
    }, e.WXAdv = v, e.WXLogin = N, e.WXPay = O, e.WXPlat = B, e.WXRewardStrategy = T, 
    e.WXShare = y, e.WXStat = D, e.xjingsdk = class {
        static initAndGetOpenId(e, t = !1) {
            return G.init(e, t);
        }
        static initWithThirdUser(e, t) {
            return G.initWithThirdUser(e, t);
        }
        static getUser() {
            return k.getUser();
        }
        static setDebugMode(e) {
            w.openDebugMode(e);
        }
        static getGameConfig(e) {
            return x.getGameConfig(e);
        }
        static getGameVerContrLevel(e, t) {
            return x.getGameVerContrLevel(e, t);
        }
        static checkFission() {
            return x.checkFission();
        }
        static getShareObject(e) {
            return b.instance.getShareObject(e);
        }
        static getIconAd(e = 0) {
            return M.getIconAd(e);
        }
        static getRecommedAdList(e = !1, t = 0, s = 0) {
            return M.getRecommedList(e, t, s);
        }
        static getBannerAdList(e = !1, t = 0, s = 0) {
            return M.getBannerList(e, t, s);
        }
        static getRewardedAdList(e = !1, t = 0, s = 0) {
            return M.getRewardedList(e, t, s);
        }
        static clickAndNavigate(e, t = 0) {
            return M.clickAndNavigate(e, t);
        }
        static reportCustomEvent(e = 0, t = "", s = "") {
            P.customEvent(e, t, s);
        }
        static reportAdVideoEndEvent(e = !1) {
            P.videoShowAndClickCountEvent(e);
        }
    }, Object.defineProperty(e, "__esModule", {
        value: !0
    }), e;
}({});